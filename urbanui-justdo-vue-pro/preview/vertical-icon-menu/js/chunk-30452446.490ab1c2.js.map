{"version":3,"sources":["webpack:///./src/pages/advanced-ui/dragula.vue?b2e6","webpack:///src/pages/advanced-ui/dragula.vue","webpack:///./src/pages/advanced-ui/dragula.vue?fd6e","webpack:///./src/pages/advanced-ui/dragula.vue","webpack:///./node_modules/vue2-dragula/dist/vue-dragula.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","directives","name","rawName","value","expression","attrs","_l","text","key","on","onClick","_s","staticRenderFns","logging","service","data","colOne","colTwo","categories","created","options","copy","methods","window","alert","testModify","component","global","factory","exports","commonjsGlobal","self","interopDefault","ex","createCommonjsModule","fn","module","atoa","a","n","Array","prototype","slice","call","atoa$1","require$$1","Object","freeze","default","ticky","tick","si","setImmediate","process","nextTick","setTimeout","ticky$1","require$$0$1","debounce","args","ctx","apply","debounce$1","require$$0","emitter","thing","opts","evt","undefined","type","push","once","_once","off","c","arguments","length","et","splice","indexOf","emit","emitterSnapshot","shift","throws","forEach","listen","async","emitter$1","require$$2","index","NativeCustomEvent","CustomEvent","useNative","p","detail","foo","e","document","createEvent","params","initCustomEvent","bubbles","cancelable","createEventObject","Boolean","index$1","require$$1$2","eventmap","eventname","ron","test","eventmap$1","require$$0$2","crossvent","customEvent","doc","addEvent","addEventEasy","removeEvent","removeEventEasy","hardCache","el","capturing","addEventListener","addEventHard","attachEvent","wrap","removeEventListener","removeEventHard","listener","unwrap","detachEvent","fabricateEvent","model","makeCustomEvent","makeClassicEvent","initEvent","dispatchEvent","fireEvent","wrapperFactory","originalEvent","event","target","srcElement","preventDefault","returnValue","stopPropagation","cancelBubble","which","keyCode","wrapper","element","i","find","item","add","remove","fabricate","crossvent$1","require$$1$1","classes","cache","start","end","lookupClass","className","cached","lastIndex","RegExp","addClass","current","rmClass","replace","trim","rm","classes$1","add$1","require$$0$3","dragula","documentElement","initialContainers","_mirror","_source","_item","_offsetX","_offsetY","_moveX","_moveY","_initialSibling","_currentSibling","_copy","_renderTimer","len","isArray","_grabbed","_lastDropTarget","o","moves","always","accepts","invalid","invalidTarget","containers","isContainer","never","copySortSource","revertOnSpill","removeOnSpill","direction","ignoreInputTextSelection","mirrorContainer","body","drake","manualStart","cancel","destroy","canMove","dragging","spillOver","spillOut","events","op","touchy","grab","release","eventualMovements","startBecauseMouseMoved","movements","preventGrabbed","clientX","clientY","ignore","whichMouseButton","metaKey","ctrlKey","context","canStart","isInput","focus","getCoord","elementBehindCursor","elementFromPoint","grabbed","offset","getOffset","left","top","renderMirrorImage","drag","handle","getParent","source","movable","nextEl","isCopy","cloneNode","drop","ungrab","getElementBehindPoint","dropTarget","findDropTarget","parent","removeChild","isInitialPlacement","cleanup","revert","reverts","initial","insertBefore","removeMirrorImage","clearTimeout","s","sibling","accepted","droppable","immediate","getImmediateChild","reference","getReference","x","y","style","changed","out","over","moved","rect","getBoundingClientRect","width","getRectWidth","height","getRectHeight","appendChild","horizontal","inside","outside","children","resolve","after","container","touch","mouseup","mousedown","mousemove","pointers","microsoft","navigator","pointerEnabled","msPointerEnabled","touches","buttons","button","getScroll","scrollProp","offsetProp","clientHeight","point","state","right","bottom","parentNode","tagName","isEditable","contentEditable","nextElementSibling","manually","nextSibling","nodeType","getEventHost","targetTouches","changedTouches","coord","host","missMap","pageX","pageY","dragula$1","classCallCheck","instance","Constructor","TypeError","createClass","defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","protoProps","staticProps","inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","possibleConstructorReturn","ReferenceError","raf","requestAnimationFrame","raffy","winTimeout","waitForTransition","isObject","obj","DragHandler","_ref","dragElm","dragIndex","dropIndex","sourceModel","serviceName","modelManager","eventBus","findModelForContainer","bind","domIndexOf","_console","shouldLog","_len","_key","console","log","clazzName","concat","removeAt","move","targetModel","dropElmModel","elements","insertAt","transitModel","models","transit","indexes","_this","dropElm","notCopy","getModel","jsonDropElmModel","cancelDrop","insertModel","dropModelSame","dropModelTarget","eventName","$emit","serviceEventName","location","createFor","removeModel","dropEl","dropModel","at","stringable","md","jsonStr","JSON","stringify","parse","get","dragHandler","BaseModelManager","modelRef","notYet","ModelManager","_BaseModelManager","getPrototypeOf","createModel","splicedModel","removedModel","modelAfterInsert","splicedRemainder","remainder","modelAfterRemove","movedModel","Error","createDragHandler","createModelManager","DragulaService","drakes","_events","eventNames","filter","includes","_len2","_key2","msg","error","method","_validate","drakeNames","errMsg","handleModels","initEvents","setupEvents","registered","_this2","handlerConfig","keys","handlerName","handlerFunction","$on","_delete","noOpts","argEventMap","argsEventMap","defaultEvent","replicate","calcOpts","child","findModelContainerByContainer","found","_argsEventMap","defaultArgsEventMap","set","customArgsEventMap","cloned","clone","original","dragend","defaults","createService","createEventBus","Vue","isEmpty","str","VueDragula","logPlugin","plugin","logServiceConfig","_console2","logDir","_console3","directive","_len3","_key3","_createService","warn","appService","globalName","Dragula","$service","setOptions","createServices","serviceOpts","_serviceMap","names","assign","createOpts","drakesFor","reduce","drakeName","drakeOpts","_typeof","serviceNames","values","$dragula","drakeContainers","findService","vnode","_dragula","componentService","calcNames","updateDirective","binding","oldVnode","newValue","_calcNames","dc","modelContainer","_calcNames2","newDrake","update","version","componentUpdated","inserted","unbind","_calcNames3","containerIndex","TimeMachine","history","createHistory","timeIndex","updateModelRef","timeTravel","newModel","createDefaultTimeMachine","ImmutableModelManager","_ModelManager","timeOut","createTimeMachine","timeMachine","undo","redo","addToHistory","before","exclAfter","actionUpdateModel","itemsBefore","sliceBefore","itemsAfter","_sliceAfter","_createNewModelFromInsert","insertItem","_model","ActionManager","observer","action","actions","done","undone","actFun","cDo","do","cUndo","pop","isSourceContainerAction","doAct","isTargetContainerAction","emitAction","fun","installed","Vue2Dragula"],"mappings":"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","file":"js/chunk-30452446.490ab1c2.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"dragula\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-12 grid-margin\"},[_c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-body\"},[_c('h4',{staticClass:\"card-title\"},[_vm._v(\"Simple Dragula\")]),_c('div',{staticClass:\"examples\"},[_c('div',{staticClass:\"parent\"},[_c('p',{staticClass:\"card-description\"},[_vm._v(\"Drag and drop between Team A and Team B\")]),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"container col-md-6\"},[_c('h6',{staticClass:\"card-title\"},[_vm._v(\"Team A\")]),_c('div',{directives:[{name:\"dragula\",rawName:\"v-dragula\",value:(_vm.colOne),expression:\"colOne\"}],staticClass:\"bg-secondary p-4\",attrs:{\"drake\":\"first\"}},_vm._l((_vm.colOne),function(text){return _c('div',{key:text,on:{\"click\":_vm.onClick}},[_c('div',{staticClass:\"card rounded mb-2\"},[_c('div',{staticClass:\"card-body p-3\"},[_c('div',{staticClass:\"media\"},[_c('div',{staticClass:\"d-flex\"},[_c('div',[_c('h6',{staticClass:\"mb-1\"},[_vm._v(_vm._s(text))])])])])])])])}),0)]),_c('div',{staticClass:\"container col-md-6\"},[_c('h6',{staticClass:\"card-title mt-3 mt-sm-0\"},[_vm._v(\"Team B\")]),_c('div',{directives:[{name:\"dragula\",rawName:\"v-dragula\",value:(_vm.colTwo),expression:\"colTwo\"}],staticClass:\"bg-secondary p-4\",attrs:{\"drake\":\"first\"}},_vm._l((_vm.colTwo),function(text){return _c('div',{key:text},[_c('div',{staticClass:\"card rounded mb-2\"},[_c('div',{staticClass:\"card-body p-3\"},[_c('div',{staticClass:\"media\"},[_c('div',{staticClass:\"d-flex\"},[_c('div',[_c('h6',{staticClass:\"mb-1\"},[_vm._v(_vm._s(text))])])])])])])])}),0)])])])])])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <section class=\"dragula\">\n    <div class=\"row\">\n      <div class=\"col-md-12 grid-margin\">\n        <div class=\"card\">\n          <div class=\"card-body\">\n            <h4 class=\"card-title\">Simple Dragula</h4>\n            <div class=\"examples\">\n              <div class=\"parent\">\n                <p class=\"card-description\">Drag and drop between Team A and Team B</p>\n                <div class=\"row\">\n                  <div class=\"container col-md-6\">\n                    <h6 class=\"card-title\">Team A</h6>\n                    <div class=\"bg-secondary p-4\" v-dragula=\"colOne\" drake=\"first\">\n                      <div v-for=\"text in colOne\" :key=\"text\" @click=\"onClick\">\n                        <div class=\"card rounded mb-2\">\n                          <div class=\"card-body p-3\">\n                            <div class=\"media\">\n                              <div class=\"d-flex\">\n                                <div>\n                                  <h6 class=\"mb-1\">{{text}}</h6>\n                                </div>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  <div class=\"container col-md-6\">\n                    <h6 class=\"card-title mt-3 mt-sm-0\">Team B</h6>\n                    <div class=\"bg-secondary p-4\" v-dragula=\"colTwo\" drake=\"first\">\n                      <div v-for=\"text in colTwo\" :key=\"text\">\n                        <div class=\"card rounded mb-2\">\n                          <div class=\"card-body p-3\">\n                            <div class=\"media\">\n                              <div class=\"d-flex\">\n                                <div>\n                                  <h6 class=\"mb-1\">{{text}}</h6>\n                                </div>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </section>\n</template>\n\n<script>\nimport Vue from \"vue\";\nimport { Vue2Dragula } from \"vue2-dragula\";\n\nVue.use(Vue2Dragula, {\n  logging: {\n    service: true // to only log methods in service (DragulaService)\n  }\n});\nexport default {\n  name: \"globalService\",\n\n  data() {\n    return {\n      colOne: [\"Rebecca young\", \"Jacob march\", \"Catherine\"],\n      colTwo: [\"Keto Philip\", \"Jacob Stephen\", \"March Creg\"],\n      categories: [\n        [1, 2, 3],\n        [4, 5, 6]\n      ]\n    };\n  },\n  created() {\n    // console.log('GLOBAL SERVICE: created')\n    let service = this.$dragula.$service;\n\n    // IMPORTANT!! setup empty named drakes matching\n    // directive drake configs in template\n    // otherwise may (currently) result in conflict\n\n    service.options(\"first\", {});\n\n    service.options(\"second\", {});\n\n    service.options(\"third\", {\n      copy: true\n    });\n\n    // console.log('GLOBAL SERVICE: ready')\n  },\n  methods: {\n    onClick() {\n      window.alert(\"click event\");\n    },\n    testModify() {\n      this.categories = [\n        [\"a\", \"b\", \"c\"],\n        [\"d\", \"e\", \"f\"]\n      ];\n    }\n  }\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dragula.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dragula.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./dragula.vue?vue&type=template&id=344cff7c&\"\nimport script from \"./dragula.vue?vue&type=script&lang=js&\"\nexport * from \"./dragula.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/*!\n * vue-dragula v2.5.3\n * (c) 2018 Yichang Liu\n * Released under the MIT License.\n */\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n\ttypeof define === 'function' && define.amd ? define(['exports'], factory) :\n\t(factory((global.vueDragula = global.vueDragula || {})));\n}(this, function (exports) { 'use strict';\n\n\tvar commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {}\n\n\tfunction interopDefault(ex) {\n\t\treturn ex && typeof ex === 'object' && 'default' in ex ? ex['default'] : ex;\n\t}\n\n\tfunction createCommonjsModule(fn, module) {\n\t\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n\t}\n\n\tvar atoa = createCommonjsModule(function (module) {\n\t  module.exports = function atoa(a, n) {\n\t    return Array.prototype.slice.call(a, n);\n\t  };\n\t});\n\n\tvar atoa$1 = interopDefault(atoa);\n\nvar require$$1 = Object.freeze({\n\t  default: atoa$1\n\t});\n\n\tvar ticky = createCommonjsModule(function (module) {\n\t  var si = typeof setImmediate === 'function',\n\t      tick;\n\t  if (si) {\n\t    tick = function tick(fn) {\n\t      setImmediate(fn);\n\t    };\n\t  } else if (typeof process !== 'undefined' && process.nextTick) {\n\t    tick = process.nextTick;\n\t  } else {\n\t    tick = function tick(fn) {\n\t      setTimeout(fn, 0);\n\t    };\n\t  }\n\n\t  module.exports = tick;\n\t});\n\n\tvar ticky$1 = interopDefault(ticky);\n\nvar require$$0$1 = Object.freeze({\n\t  default: ticky$1\n\t});\n\n\tvar debounce = createCommonjsModule(function (module) {\n\t  'use strict';\n\n\t  var ticky = interopDefault(require$$0$1);\n\n\t  module.exports = function debounce(fn, args, ctx) {\n\t    if (!fn) {\n\t      return;\n\t    }\n\t    ticky(function run() {\n\t      fn.apply(ctx || null, args || []);\n\t    });\n\t  };\n\t});\n\n\tvar debounce$1 = interopDefault(debounce);\n\nvar require$$0 = Object.freeze({\n\t  default: debounce$1\n\t});\n\n\tvar emitter = createCommonjsModule(function (module) {\n\t  'use strict';\n\n\t  var atoa = interopDefault(require$$1);\n\t  var debounce = interopDefault(require$$0);\n\n\t  module.exports = function emitter(thing, options) {\n\t    var opts = options || {};\n\t    var evt = {};\n\t    if (thing === undefined) {\n\t      thing = {};\n\t    }\n\t    thing.on = function (type, fn) {\n\t      if (!evt[type]) {\n\t        evt[type] = [fn];\n\t      } else {\n\t        evt[type].push(fn);\n\t      }\n\t      return thing;\n\t    };\n\t    thing.once = function (type, fn) {\n\t      fn._once = true; // thing.off(fn) still works!\n\t      thing.on(type, fn);\n\t      return thing;\n\t    };\n\t    thing.off = function (type, fn) {\n\t      var c = arguments.length;\n\t      if (c === 1) {\n\t        delete evt[type];\n\t      } else if (c === 0) {\n\t        evt = {};\n\t      } else {\n\t        var et = evt[type];\n\t        if (!et) {\n\t          return thing;\n\t        }\n\t        et.splice(et.indexOf(fn), 1);\n\t      }\n\t      return thing;\n\t    };\n\t    thing.emit = function () {\n\t      var args = atoa(arguments);\n\t      return thing.emitterSnapshot(args.shift()).apply(this, args);\n\t    };\n\t    thing.emitterSnapshot = function (type) {\n\t      var et = (evt[type] || []).slice(0);\n\t      return function () {\n\t        var args = atoa(arguments);\n\t        var ctx = this || thing;\n\t        if (type === 'error' && opts.throws !== false && !et.length) {\n\t          throw args.length === 1 ? args[0] : args;\n\t        }\n\t        et.forEach(function emitter(listen) {\n\t          if (opts.async) {\n\t            debounce(listen, args, ctx);\n\t          } else {\n\t            listen.apply(ctx, args);\n\t          }\n\t          if (listen._once) {\n\t            thing.off(type, listen);\n\t          }\n\t        });\n\t        return thing;\n\t      };\n\t    };\n\t    return thing;\n\t  };\n\t});\n\n\tvar emitter$1 = interopDefault(emitter);\n\nvar require$$2 = Object.freeze({\n\t  default: emitter$1\n\t});\n\n\tvar index = createCommonjsModule(function (module) {\n\t  var NativeCustomEvent = commonjsGlobal.CustomEvent;\n\n\t  function useNative() {\n\t    try {\n\t      var p = new NativeCustomEvent('cat', { detail: { foo: 'bar' } });\n\t      return 'cat' === p.type && 'bar' === p.detail.foo;\n\t    } catch (e) {}\n\t    return false;\n\t  }\n\n\t  /**\n\t   * Cross-browser `CustomEvent` constructor.\n\t   *\n\t   * https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent.CustomEvent\n\t   *\n\t   * @public\n\t   */\n\n\t  module.exports = useNative() ? NativeCustomEvent :\n\n\t  // IE >= 9\n\t  'function' === typeof document.createEvent ? function CustomEvent(type, params) {\n\t    var e = document.createEvent('CustomEvent');\n\t    if (params) {\n\t      e.initCustomEvent(type, params.bubbles, params.cancelable, params.detail);\n\t    } else {\n\t      e.initCustomEvent(type, false, false, void 0);\n\t    }\n\t    return e;\n\t  } :\n\n\t  // IE <= 8\n\t  function CustomEvent(type, params) {\n\t    var e = document.createEventObject();\n\t    e.type = type;\n\t    if (params) {\n\t      e.bubbles = Boolean(params.bubbles);\n\t      e.cancelable = Boolean(params.cancelable);\n\t      e.detail = params.detail;\n\t    } else {\n\t      e.bubbles = false;\n\t      e.cancelable = false;\n\t      e.detail = void 0;\n\t    }\n\t    return e;\n\t  };\n\t});\n\n\tvar index$1 = interopDefault(index);\n\nvar require$$1$2 = Object.freeze({\n\t  default: index$1\n\t});\n\n\tvar eventmap = createCommonjsModule(function (module) {\n\t  'use strict';\n\n\t  var eventmap = [];\n\t  var eventname = '';\n\t  var ron = /^on/;\n\n\t  for (eventname in commonjsGlobal) {\n\t    if (ron.test(eventname)) {\n\t      eventmap.push(eventname.slice(2));\n\t    }\n\t  }\n\n\t  module.exports = eventmap;\n\t});\n\n\tvar eventmap$1 = interopDefault(eventmap);\n\nvar require$$0$2 = Object.freeze({\n\t  default: eventmap$1\n\t});\n\n\tvar crossvent = createCommonjsModule(function (module) {\n\t  'use strict';\n\n\t  var customEvent = interopDefault(require$$1$2);\n\t  var eventmap = interopDefault(require$$0$2);\n\t  var doc = commonjsGlobal.document;\n\t  var addEvent = addEventEasy;\n\t  var removeEvent = removeEventEasy;\n\t  var hardCache = [];\n\n\t  if (!commonjsGlobal.addEventListener) {\n\t    addEvent = addEventHard;\n\t    removeEvent = removeEventHard;\n\t  }\n\n\t  module.exports = {\n\t    add: addEvent,\n\t    remove: removeEvent,\n\t    fabricate: fabricateEvent\n\t  };\n\n\t  function addEventEasy(el, type, fn, capturing) {\n\t    return el.addEventListener(type, fn, capturing);\n\t  }\n\n\t  function addEventHard(el, type, fn) {\n\t    return el.attachEvent('on' + type, wrap(el, type, fn));\n\t  }\n\n\t  function removeEventEasy(el, type, fn, capturing) {\n\t    return el.removeEventListener(type, fn, capturing);\n\t  }\n\n\t  function removeEventHard(el, type, fn) {\n\t    var listener = unwrap(el, type, fn);\n\t    if (listener) {\n\t      return el.detachEvent('on' + type, listener);\n\t    }\n\t  }\n\n\t  function fabricateEvent(el, type, model) {\n\t    var e = eventmap.indexOf(type) === -1 ? makeCustomEvent() : makeClassicEvent();\n\t    if (el.dispatchEvent) {\n\t      el.dispatchEvent(e);\n\t    } else {\n\t      el.fireEvent('on' + type, e);\n\t    }\n\t    function makeClassicEvent() {\n\t      var e;\n\t      if (doc.createEvent) {\n\t        e = doc.createEvent('Event');\n\t        e.initEvent(type, true, true);\n\t      } else if (doc.createEventObject) {\n\t        e = doc.createEventObject();\n\t      }\n\t      return e;\n\t    }\n\t    function makeCustomEvent() {\n\t      return new customEvent(type, { detail: model });\n\t    }\n\t  }\n\n\t  function wrapperFactory(el, type, fn) {\n\t    return function wrapper(originalEvent) {\n\t      var e = originalEvent || commonjsGlobal.event;\n\t      e.target = e.target || e.srcElement;\n\t      e.preventDefault = e.preventDefault || function preventDefault() {\n\t        e.returnValue = false;\n\t      };\n\t      e.stopPropagation = e.stopPropagation || function stopPropagation() {\n\t        e.cancelBubble = true;\n\t      };\n\t      e.which = e.which || e.keyCode;\n\t      fn.call(el, e);\n\t    };\n\t  }\n\n\t  function wrap(el, type, fn) {\n\t    var wrapper = unwrap(el, type, fn) || wrapperFactory(el, type, fn);\n\t    hardCache.push({\n\t      wrapper: wrapper,\n\t      element: el,\n\t      type: type,\n\t      fn: fn\n\t    });\n\t    return wrapper;\n\t  }\n\n\t  function unwrap(el, type, fn) {\n\t    var i = find(el, type, fn);\n\t    if (i) {\n\t      var wrapper = hardCache[i].wrapper;\n\t      hardCache.splice(i, 1); // free up a tad of memory\n\t      return wrapper;\n\t    }\n\t  }\n\n\t  function find(el, type, fn) {\n\t    var i, item;\n\t    for (i = 0; i < hardCache.length; i++) {\n\t      item = hardCache[i];\n\t      if (item.element === el && item.type === type && item.fn === fn) {\n\t        return i;\n\t      }\n\t    }\n\t  }\n\t});\n\n\tvar crossvent$1 = interopDefault(crossvent);\n\tvar add = crossvent.add;\n\tvar remove = crossvent.remove;\n\tvar fabricate = crossvent.fabricate;\n\nvar require$$1$1 = Object.freeze({\n\t  default: crossvent$1,\n\t  add: add,\n\t  remove: remove,\n\t  fabricate: fabricate\n\t});\n\n\tvar classes = createCommonjsModule(function (module) {\n\t  'use strict';\n\n\t  var cache = {};\n\t  var start = '(?:^|\\\\s)';\n\t  var end = '(?:\\\\s|$)';\n\n\t  function lookupClass(className) {\n\t    var cached = cache[className];\n\t    if (cached) {\n\t      cached.lastIndex = 0;\n\t    } else {\n\t      cache[className] = cached = new RegExp(start + className + end, 'g');\n\t    }\n\t    return cached;\n\t  }\n\n\t  function addClass(el, className) {\n\t    var current = el.className;\n\t    if (!current.length) {\n\t      el.className = className;\n\t    } else if (!lookupClass(className).test(current)) {\n\t      el.className += ' ' + className;\n\t    }\n\t  }\n\n\t  function rmClass(el, className) {\n\t    el.className = el.className.replace(lookupClass(className), ' ').trim();\n\t  }\n\n\t  module.exports = {\n\t    add: addClass,\n\t    rm: rmClass\n\t  };\n\t});\n\n\tvar classes$1 = interopDefault(classes);\n\tvar add$1 = classes.add;\n\tvar rm = classes.rm;\n\nvar require$$0$3 = Object.freeze({\n\t  default: classes$1,\n\t  add: add$1,\n\t  rm: rm\n\t});\n\n\tvar dragula = createCommonjsModule(function (module) {\n\t  'use strict';\n\n\t  var emitter = interopDefault(require$$2);\n\t  var crossvent = interopDefault(require$$1$1);\n\t  var classes = interopDefault(require$$0$3);\n\t  var doc = document;\n\t  var documentElement = doc.documentElement;\n\n\t  function dragula(initialContainers, options) {\n\t    var len = arguments.length;\n\t    if (len === 1 && Array.isArray(initialContainers) === false) {\n\t      options = initialContainers;\n\t      initialContainers = [];\n\t    }\n\t    var _mirror; // mirror image\n\t    var _source; // source container\n\t    var _item; // item being dragged\n\t    var _offsetX; // reference x\n\t    var _offsetY; // reference y\n\t    var _moveX; // reference move x\n\t    var _moveY; // reference move y\n\t    var _initialSibling; // reference sibling when grabbed\n\t    var _currentSibling; // reference sibling now\n\t    var _copy; // item used for copying\n\t    var _renderTimer; // timer for setTimeout renderMirrorImage\n\t    var _lastDropTarget = null; // last container item was over\n\t    var _grabbed; // holds mousedown context until first mousemove\n\n\t    var o = options || {};\n\t    if (o.moves === void 0) {\n\t      o.moves = always;\n\t    }\n\t    if (o.accepts === void 0) {\n\t      o.accepts = always;\n\t    }\n\t    if (o.invalid === void 0) {\n\t      o.invalid = invalidTarget;\n\t    }\n\t    if (o.containers === void 0) {\n\t      o.containers = initialContainers || [];\n\t    }\n\t    if (o.isContainer === void 0) {\n\t      o.isContainer = never;\n\t    }\n\t    if (o.copy === void 0) {\n\t      o.copy = false;\n\t    }\n\t    if (o.copySortSource === void 0) {\n\t      o.copySortSource = false;\n\t    }\n\t    if (o.revertOnSpill === void 0) {\n\t      o.revertOnSpill = false;\n\t    }\n\t    if (o.removeOnSpill === void 0) {\n\t      o.removeOnSpill = false;\n\t    }\n\t    if (o.direction === void 0) {\n\t      o.direction = 'vertical';\n\t    }\n\t    if (o.ignoreInputTextSelection === void 0) {\n\t      o.ignoreInputTextSelection = true;\n\t    }\n\t    if (o.mirrorContainer === void 0) {\n\t      o.mirrorContainer = doc.body;\n\t    }\n\n\t    var drake = emitter({\n\t      containers: o.containers,\n\t      start: manualStart,\n\t      end: end,\n\t      cancel: cancel,\n\t      remove: remove,\n\t      destroy: destroy,\n\t      canMove: canMove,\n\t      dragging: false\n\t    });\n\n\t    if (o.removeOnSpill === true) {\n\t      drake.on('over', spillOver).on('out', spillOut);\n\t    }\n\n\t    events();\n\n\t    return drake;\n\n\t    function isContainer(el) {\n\t      return drake.containers.indexOf(el) !== -1 || o.isContainer(el);\n\t    }\n\n\t    function events(remove) {\n\t      var op = remove ? 'remove' : 'add';\n\t      touchy(documentElement, op, 'mousedown', grab);\n\t      touchy(documentElement, op, 'mouseup', release);\n\t    }\n\n\t    function eventualMovements(remove) {\n\t      var op = remove ? 'remove' : 'add';\n\t      touchy(documentElement, op, 'mousemove', startBecauseMouseMoved);\n\t    }\n\n\t    function movements(remove) {\n\t      var op = remove ? 'remove' : 'add';\n\t      crossvent[op](documentElement, 'selectstart', preventGrabbed); // IE8\n\t      crossvent[op](documentElement, 'click', preventGrabbed);\n\t    }\n\n\t    function destroy() {\n\t      events(true);\n\t      release({});\n\t    }\n\n\t    function preventGrabbed(e) {\n\t      if (_grabbed) {\n\t        e.preventDefault();\n\t      }\n\t    }\n\n\t    function grab(e) {\n\t      _moveX = e.clientX;\n\t      _moveY = e.clientY;\n\n\t      var ignore = whichMouseButton(e) !== 1 || e.metaKey || e.ctrlKey;\n\t      if (ignore) {\n\t        return; // we only care about honest-to-god left clicks and touch events\n\t      }\n\t      var item = e.target;\n\t      var context = canStart(item);\n\t      if (!context) {\n\t        return;\n\t      }\n\t      _grabbed = context;\n\t      eventualMovements();\n\t      if (e.type === 'mousedown') {\n\t        if (isInput(item)) {\n\t          // see also: https://github.com/bevacqua/dragula/issues/208\n\t          item.focus(); // fixes https://github.com/bevacqua/dragula/issues/176\n\t        } else {\n\t          e.preventDefault(); // fixes https://github.com/bevacqua/dragula/issues/155\n\t        }\n\t      }\n\t    }\n\n\t    function startBecauseMouseMoved(e) {\n\t      if (!_grabbed) {\n\t        return;\n\t      }\n\t      if (whichMouseButton(e) === 0) {\n\t        release({});\n\t        return; // when text is selected on an input and then dragged, mouseup doesn't fire. this is our only hope\n\t      }\n\t      // truthy check fixes #239, equality fixes #207\n\t      if (e.clientX !== void 0 && e.clientX === _moveX && e.clientY !== void 0 && e.clientY === _moveY) {\n\t        return;\n\t      }\n\t      if (o.ignoreInputTextSelection) {\n\t        var clientX = getCoord('clientX', e);\n\t        var clientY = getCoord('clientY', e);\n\t        var elementBehindCursor = doc.elementFromPoint(clientX, clientY);\n\t        if (isInput(elementBehindCursor)) {\n\t          return;\n\t        }\n\t      }\n\n\t      var grabbed = _grabbed; // call to end() unsets _grabbed\n\t      eventualMovements(true);\n\t      movements();\n\t      end();\n\t      start(grabbed);\n\n\t      var offset = getOffset(_item);\n\t      _offsetX = getCoord('pageX', e) - offset.left;\n\t      _offsetY = getCoord('pageY', e) - offset.top;\n\n\t      classes.add(_copy || _item, 'gu-transit');\n\t      renderMirrorImage();\n\t      drag(e);\n\t    }\n\n\t    function canStart(item) {\n\t      if (drake.dragging && _mirror) {\n\t        return;\n\t      }\n\t      if (isContainer(item)) {\n\t        return; // don't drag container itself\n\t      }\n\t      var handle = item;\n\t      while (getParent(item) && isContainer(getParent(item)) === false) {\n\t        if (o.invalid(item, handle)) {\n\t          return;\n\t        }\n\t        item = getParent(item); // drag target should be a top element\n\t        if (!item) {\n\t          return;\n\t        }\n\t      }\n\t      var source = getParent(item);\n\t      if (!source) {\n\t        return;\n\t      }\n\t      if (o.invalid(item, handle)) {\n\t        return;\n\t      }\n\n\t      var movable = o.moves(item, source, handle, nextEl(item));\n\t      if (!movable) {\n\t        return;\n\t      }\n\n\t      return {\n\t        item: item,\n\t        source: source\n\t      };\n\t    }\n\n\t    function canMove(item) {\n\t      return !!canStart(item);\n\t    }\n\n\t    function manualStart(item) {\n\t      var context = canStart(item);\n\t      if (context) {\n\t        start(context);\n\t      }\n\t    }\n\n\t    function start(context) {\n\t      if (isCopy(context.item, context.source)) {\n\t        _copy = context.item.cloneNode(true);\n\t        drake.emit('cloned', _copy, context.item, 'copy');\n\t      }\n\n\t      _source = context.source;\n\t      _item = context.item;\n\t      _initialSibling = _currentSibling = nextEl(context.item);\n\n\t      drake.dragging = true;\n\t      drake.emit('drag', _item, _source);\n\t    }\n\n\t    function invalidTarget() {\n\t      return false;\n\t    }\n\n\t    function end() {\n\t      if (!drake.dragging) {\n\t        return;\n\t      }\n\t      var item = _copy || _item;\n\t      drop(item, getParent(item));\n\t    }\n\n\t    function ungrab() {\n\t      _grabbed = false;\n\t      eventualMovements(true);\n\t      movements(true);\n\t    }\n\n\t    function release(e) {\n\t      ungrab();\n\n\t      if (!drake.dragging) {\n\t        return;\n\t      }\n\t      var item = _copy || _item;\n\t      var clientX = getCoord('clientX', e);\n\t      var clientY = getCoord('clientY', e);\n\t      var elementBehindCursor = getElementBehindPoint(_mirror, clientX, clientY);\n\t      var dropTarget = findDropTarget(elementBehindCursor, clientX, clientY);\n\t      if (dropTarget && (_copy && o.copySortSource || !_copy || dropTarget !== _source)) {\n\t        drop(item, dropTarget);\n\t      } else if (o.removeOnSpill) {\n\t        remove();\n\t      } else {\n\t        cancel();\n\t      }\n\t    }\n\n\t    function drop(item, target) {\n\t      var parent = getParent(item);\n\t      if (_copy && o.copySortSource && target === _source) {\n\t        parent.removeChild(_item);\n\t      }\n\t      if (isInitialPlacement(target)) {\n\t        drake.emit('cancel', item, _source, _source);\n\t      } else {\n\t        drake.emit('drop', item, target, _source, _currentSibling);\n\t      }\n\t      cleanup();\n\t    }\n\n\t    function remove() {\n\t      if (!drake.dragging) {\n\t        return;\n\t      }\n\t      var item = _copy || _item;\n\t      var parent = getParent(item);\n\t      if (parent) {\n\t        parent.removeChild(item);\n\t      }\n\t      drake.emit(_copy ? 'cancel' : 'remove', item, parent, _source);\n\t      cleanup();\n\t    }\n\n\t    function cancel(revert) {\n\t      if (!drake.dragging) {\n\t        return;\n\t      }\n\t      var reverts = arguments.length > 0 ? revert : o.revertOnSpill;\n\t      var item = _copy || _item;\n\t      var parent = getParent(item);\n\t      var initial = isInitialPlacement(parent);\n\t      if (initial === false && reverts) {\n\t        if (_copy) {\n\t          if (parent) {\n\t            parent.removeChild(_copy);\n\t          }\n\t        } else {\n\t          _source.insertBefore(item, _initialSibling);\n\t        }\n\t      }\n\t      if (initial || reverts) {\n\t        drake.emit('cancel', item, _source, _source);\n\t      } else {\n\t        drake.emit('drop', item, parent, _source, _currentSibling);\n\t      }\n\t      cleanup();\n\t    }\n\n\t    function cleanup() {\n\t      var item = _copy || _item;\n\t      ungrab();\n\t      removeMirrorImage();\n\t      if (item) {\n\t        classes.rm(item, 'gu-transit');\n\t      }\n\t      if (_renderTimer) {\n\t        clearTimeout(_renderTimer);\n\t      }\n\t      drake.dragging = false;\n\t      if (_lastDropTarget) {\n\t        drake.emit('out', item, _lastDropTarget, _source);\n\t      }\n\t      drake.emit('dragend', item);\n\t      _source = _item = _copy = _initialSibling = _currentSibling = _renderTimer = _lastDropTarget = null;\n\t    }\n\n\t    function isInitialPlacement(target, s) {\n\t      var sibling;\n\t      if (s !== void 0) {\n\t        sibling = s;\n\t      } else if (_mirror) {\n\t        sibling = _currentSibling;\n\t      } else {\n\t        sibling = nextEl(_copy || _item);\n\t      }\n\t      return target === _source && sibling === _initialSibling;\n\t    }\n\n\t    function findDropTarget(elementBehindCursor, clientX, clientY) {\n\t      var target = elementBehindCursor;\n\t      while (target && !accepted()) {\n\t        target = getParent(target);\n\t      }\n\t      return target;\n\n\t      function accepted() {\n\t        var droppable = isContainer(target);\n\t        if (droppable === false) {\n\t          return false;\n\t        }\n\n\t        var immediate = getImmediateChild(target, elementBehindCursor);\n\t        var reference = getReference(target, immediate, clientX, clientY);\n\t        var initial = isInitialPlacement(target, reference);\n\t        if (initial) {\n\t          return true; // should always be able to drop it right back where it was\n\t        }\n\t        return o.accepts(_item, target, _source, reference);\n\t      }\n\t    }\n\n\t    function drag(e) {\n\t      if (!_mirror) {\n\t        return;\n\t      }\n\t      e.preventDefault();\n\n\t      var clientX = getCoord('clientX', e);\n\t      var clientY = getCoord('clientY', e);\n\t      var x = clientX - _offsetX;\n\t      var y = clientY - _offsetY;\n\n\t      _mirror.style.left = x + 'px';\n\t      _mirror.style.top = y + 'px';\n\n\t      var item = _copy || _item;\n\t      var elementBehindCursor = getElementBehindPoint(_mirror, clientX, clientY);\n\t      var dropTarget = findDropTarget(elementBehindCursor, clientX, clientY);\n\t      var changed = dropTarget !== null && dropTarget !== _lastDropTarget;\n\t      if (changed || dropTarget === null) {\n\t        out();\n\t        _lastDropTarget = dropTarget;\n\t        over();\n\t      }\n\t      var parent = getParent(item);\n\t      if (dropTarget === _source && _copy && !o.copySortSource) {\n\t        if (parent) {\n\t          parent.removeChild(item);\n\t        }\n\t        return;\n\t      }\n\t      var reference;\n\t      var immediate = getImmediateChild(dropTarget, elementBehindCursor);\n\t      if (immediate !== null) {\n\t        reference = getReference(dropTarget, immediate, clientX, clientY);\n\t      } else if (o.revertOnSpill === true && !_copy) {\n\t        reference = _initialSibling;\n\t        dropTarget = _source;\n\t      } else {\n\t        if (_copy && parent) {\n\t          parent.removeChild(item);\n\t        }\n\t        return;\n\t      }\n\t      if (reference === null && changed || reference !== item && reference !== nextEl(item)) {\n\t        _currentSibling = reference;\n\t        dropTarget.insertBefore(item, reference);\n\t        drake.emit('shadow', item, dropTarget, _source);\n\t      }\n\t      function moved(type) {\n\t        drake.emit(type, item, _lastDropTarget, _source);\n\t      }\n\t      function over() {\n\t        if (changed) {\n\t          moved('over');\n\t        }\n\t      }\n\t      function out() {\n\t        if (_lastDropTarget) {\n\t          moved('out');\n\t        }\n\t      }\n\t    }\n\n\t    function spillOver(el) {\n\t      classes.rm(el, 'gu-hide');\n\t    }\n\n\t    function spillOut(el) {\n\t      if (drake.dragging) {\n\t        classes.add(el, 'gu-hide');\n\t      }\n\t    }\n\n\t    function renderMirrorImage() {\n\t      if (_mirror) {\n\t        return;\n\t      }\n\t      var rect = _item.getBoundingClientRect();\n\t      _mirror = _item.cloneNode(true);\n\t      _mirror.style.width = getRectWidth(rect) + 'px';\n\t      _mirror.style.height = getRectHeight(rect) + 'px';\n\t      classes.rm(_mirror, 'gu-transit');\n\t      classes.add(_mirror, 'gu-mirror');\n\t      o.mirrorContainer.appendChild(_mirror);\n\t      touchy(documentElement, 'add', 'mousemove', drag);\n\t      classes.add(o.mirrorContainer, 'gu-unselectable');\n\t      drake.emit('cloned', _mirror, _item, 'mirror');\n\t    }\n\n\t    function removeMirrorImage() {\n\t      if (_mirror) {\n\t        classes.rm(o.mirrorContainer, 'gu-unselectable');\n\t        touchy(documentElement, 'remove', 'mousemove', drag);\n\t        getParent(_mirror).removeChild(_mirror);\n\t        _mirror = null;\n\t      }\n\t    }\n\n\t    function getImmediateChild(dropTarget, target) {\n\t      var immediate = target;\n\t      while (immediate !== dropTarget && getParent(immediate) !== dropTarget) {\n\t        immediate = getParent(immediate);\n\t      }\n\t      if (immediate === documentElement) {\n\t        return null;\n\t      }\n\t      return immediate;\n\t    }\n\n\t    function getReference(dropTarget, target, x, y) {\n\t      var horizontal = o.direction === 'horizontal';\n\t      var reference = target !== dropTarget ? inside() : outside();\n\t      return reference;\n\n\t      function outside() {\n\t        // slower, but able to figure out any position\n\t        var len = dropTarget.children.length;\n\t        var i;\n\t        var el;\n\t        var rect;\n\t        for (i = 0; i < len; i++) {\n\t          el = dropTarget.children[i];\n\t          rect = el.getBoundingClientRect();\n\t          if (horizontal && rect.left + rect.width / 2 > x) {\n\t            return el;\n\t          }\n\t          if (!horizontal && rect.top + rect.height / 2 > y) {\n\t            return el;\n\t          }\n\t        }\n\t        return null;\n\t      }\n\n\t      function inside() {\n\t        // faster, but only available if dropped inside a child element\n\t        var rect = target.getBoundingClientRect();\n\t        if (horizontal) {\n\t          return resolve(x > rect.left + getRectWidth(rect) / 2);\n\t        }\n\t        return resolve(y > rect.top + getRectHeight(rect) / 2);\n\t      }\n\n\t      function resolve(after) {\n\t        return after ? nextEl(target) : target;\n\t      }\n\t    }\n\n\t    function isCopy(item, container) {\n\t      return typeof o.copy === 'boolean' ? o.copy : o.copy(item, container);\n\t    }\n\t  }\n\n\t  function touchy(el, op, type, fn) {\n\t    var touch = {\n\t      mouseup: 'touchend',\n\t      mousedown: 'touchstart',\n\t      mousemove: 'touchmove'\n\t    };\n\t    var pointers = {\n\t      mouseup: 'pointerup',\n\t      mousedown: 'pointerdown',\n\t      mousemove: 'pointermove'\n\t    };\n\t    var microsoft = {\n\t      mouseup: 'MSPointerUp',\n\t      mousedown: 'MSPointerDown',\n\t      mousemove: 'MSPointerMove'\n\t    };\n\t    if (commonjsGlobal.navigator.pointerEnabled) {\n\t      crossvent[op](el, pointers[type], fn);\n\t    } else if (commonjsGlobal.navigator.msPointerEnabled) {\n\t      crossvent[op](el, microsoft[type], fn);\n\t    } else {\n\t      crossvent[op](el, touch[type], fn);\n\t      crossvent[op](el, type, fn);\n\t    }\n\t  }\n\n\t  function whichMouseButton(e) {\n\t    if (e.touches !== void 0) {\n\t      return e.touches.length;\n\t    }\n\t    if (e.which !== void 0 && e.which !== 0) {\n\t      return e.which;\n\t    } // see https://github.com/bevacqua/dragula/issues/261\n\t    if (e.buttons !== void 0) {\n\t      return e.buttons;\n\t    }\n\t    var button = e.button;\n\t    if (button !== void 0) {\n\t      // see https://github.com/jquery/jquery/blob/99e8ff1baa7ae341e94bb89c3e84570c7c3ad9ea/src/event.js#L573-L575\n\t      return button & 1 ? 1 : button & 2 ? 3 : button & 4 ? 2 : 0;\n\t    }\n\t  }\n\n\t  function getOffset(el) {\n\t    var rect = el.getBoundingClientRect();\n\t    return {\n\t      left: rect.left + getScroll('scrollLeft', 'pageXOffset'),\n\t      top: rect.top + getScroll('scrollTop', 'pageYOffset')\n\t    };\n\t  }\n\n\t  function getScroll(scrollProp, offsetProp) {\n\t    if (typeof commonjsGlobal[offsetProp] !== 'undefined') {\n\t      return commonjsGlobal[offsetProp];\n\t    }\n\t    if (documentElement.clientHeight) {\n\t      return documentElement[scrollProp];\n\t    }\n\t    return doc.body[scrollProp];\n\t  }\n\n\t  function getElementBehindPoint(point, x, y) {\n\t    var p = point || {};\n\t    var state = p.className;\n\t    var el;\n\t    p.className += ' gu-hide';\n\t    el = doc.elementFromPoint(x, y);\n\t    p.className = state;\n\t    return el;\n\t  }\n\n\t  function never() {\n\t    return false;\n\t  }\n\t  function always() {\n\t    return true;\n\t  }\n\t  function getRectWidth(rect) {\n\t    return rect.width || rect.right - rect.left;\n\t  }\n\t  function getRectHeight(rect) {\n\t    return rect.height || rect.bottom - rect.top;\n\t  }\n\t  function getParent(el) {\n\t    return el.parentNode === doc ? null : el.parentNode;\n\t  }\n\t  function isInput(el) {\n\t    return el.tagName === 'INPUT' || el.tagName === 'TEXTAREA' || el.tagName === 'SELECT' || isEditable(el);\n\t  }\n\t  function isEditable(el) {\n\t    if (!el) {\n\t      return false;\n\t    } // no parents were editable\n\t    if (el.contentEditable === 'false') {\n\t      return false;\n\t    } // stop the lookup\n\t    if (el.contentEditable === 'true') {\n\t      return true;\n\t    } // found a contentEditable element in the chain\n\t    return isEditable(getParent(el)); // contentEditable is set to 'inherit'\n\t  }\n\n\t  function nextEl(el) {\n\t    return el.nextElementSibling || manually();\n\t    function manually() {\n\t      var sibling = el;\n\t      do {\n\t        sibling = sibling.nextSibling;\n\t      } while (sibling && sibling.nodeType !== 1);\n\t      return sibling;\n\t    }\n\t  }\n\n\t  function getEventHost(e) {\n\t    // on touchend event, we have to use `e.changedTouches`\n\t    // see http://stackoverflow.com/questions/7192563/touchend-event-properties\n\t    // see https://github.com/bevacqua/dragula/issues/34\n\t    if (e.targetTouches && e.targetTouches.length) {\n\t      return e.targetTouches[0];\n\t    }\n\t    if (e.changedTouches && e.changedTouches.length) {\n\t      return e.changedTouches[0];\n\t    }\n\t    return e;\n\t  }\n\n\t  function getCoord(coord, e) {\n\t    var host = getEventHost(e);\n\t    var missMap = {\n\t      pageX: 'clientX', // IE8\n\t      pageY: 'clientY' // IE8\n\t    };\n\t    if (coord in missMap && !(coord in host) && missMap[coord] in host) {\n\t      coord = missMap[coord];\n\t    }\n\t    return host[coord];\n\t  }\n\n\t  module.exports = dragula;\n\t});\n\n\tvar dragula$1 = interopDefault(dragula);\n\n\tvar classCallCheck = function (instance, Constructor) {\n\t  if (!(instance instanceof Constructor)) {\n\t    throw new TypeError(\"Cannot call a class as a function\");\n\t  }\n\t};\n\n\tvar createClass = function () {\n\t  function defineProperties(target, props) {\n\t    for (var i = 0; i < props.length; i++) {\n\t      var descriptor = props[i];\n\t      descriptor.enumerable = descriptor.enumerable || false;\n\t      descriptor.configurable = true;\n\t      if (\"value\" in descriptor) descriptor.writable = true;\n\t      Object.defineProperty(target, descriptor.key, descriptor);\n\t    }\n\t  }\n\n\t  return function (Constructor, protoProps, staticProps) {\n\t    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n\t    if (staticProps) defineProperties(Constructor, staticProps);\n\t    return Constructor;\n\t  };\n\t}();\n\n\tvar inherits = function (subClass, superClass) {\n\t  if (typeof superClass !== \"function\" && superClass !== null) {\n\t    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n\t  }\n\n\t  subClass.prototype = Object.create(superClass && superClass.prototype, {\n\t    constructor: {\n\t      value: subClass,\n\t      enumerable: false,\n\t      writable: true,\n\t      configurable: true\n\t    }\n\t  });\n\t  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n\t};\n\n\tvar possibleConstructorReturn = function (self, call) {\n\t  if (!self) {\n\t    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n\t  }\n\n\t  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n\t};\n\n\tvar raf = window.requestAnimationFrame;\n\n\tfunction raffy(fn) {\n\t  raf(function () {\n\t    raf(fn);\n\t  });\n\t}\n\n\tfunction winTimeout(fn) {\n\t  window.setTimeout(fn, 50);\n\t}\n\n\tvar waitForTransition = raf ? raffy : winTimeout;\n\n\tfunction isObject(obj) {\n\t  return obj === Object(obj);\n\t}\n\n\tvar DragHandler = function () {\n\t  function DragHandler(_ref) {\n\t    var ctx = _ref.ctx,\n\t        name = _ref.name,\n\t        drake = _ref.drake,\n\t        options = _ref.options;\n\t    classCallCheck(this, DragHandler);\n\n\t    this.dragElm = null;\n\t    this.dragIndex = null;\n\t    this.dropIndex = null;\n\t    this.sourceModel = null;\n\t    this.logging = ctx.logging;\n\t    this.ctx = ctx;\n\t    this.serviceName = ctx.name;\n\t    this.modelManager = ctx.modelManager;\n\t    this.drake = drake;\n\t    this.name = name;\n\t    this.eventBus = ctx.eventBus;\n\t    this.findModelForContainer = ctx.findModelForContainer.bind(ctx);\n\t    this.domIndexOf = ctx.domIndexOf.bind(ctx);\n\t  }\n\n\t  createClass(DragHandler, [{\n\t    key: 'log',\n\t    value: function log(event) {\n\t      var _console;\n\n\t      if (!this.shouldLog) return;\n\n\t      for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n\t        args[_key - 1] = arguments[_key];\n\t      }\n\n\t      (_console = console).log.apply(_console, [this.clazzName + ' [' + this.name + '] :', event].concat(args));\n\t    }\n\n\t    /**\n\t     * Remove model at drag index\n\t     */\n\n\t  }, {\n\t    key: 'removeModel',\n\t    value: function removeModel() {\n\t      this.log('removeModel', {\n\t        sourceModel: this.sourceModel,\n\t        dragIndex: this.dragIndex\n\t      });\n\t      this.sourceModel.removeAt(this.dragIndex);\n\t    }\n\n\t    /**\n\t     * Drop model on same container\n\t     * Move model from dropIndex to dragIndex\n\t     */\n\n\t  }, {\n\t    key: 'dropModelSame',\n\t    value: function dropModelSame() {\n\t      this.log('dropModelSame', {\n\t        sourceModel: this.sourceModel,\n\t        dragIndex: this.dragIndex,\n\t        dropIndex: this.dropIndex\n\t      });\n\n\t      this.sourceModel.move({\n\t        dropIndex: this.dropIndex,\n\t        dragIndex: this.dragIndex\n\t      });\n\t    }\n\n\t    /**\n\t     * Insert model on targetModel\n\t     * @param {*} targetModel\n\t     * @param {*} dropElmModel\n\t     * @param {*} elements\n\t     */\n\n\t  }, {\n\t    key: 'insertModel',\n\t    value: function insertModel(targetModel, dropElmModel, elements) {\n\t      this.log('insertModel', {\n\t        targetModel: targetModel,\n\t        dropIndex: this.dropIndex,\n\t        dropElmModel: dropElmModel,\n\t        elements: elements\n\t      });\n\n\t      targetModel.insertAt(this.dropIndex, dropElmModel);\n\n\t      this.emit('insertAt', {\n\t        elements: elements,\n\t        targetModel: targetModel,\n\t        transitModel: dropElmModel,\n\t        dragIndex: this.dragIndex,\n\t        dropIndex: this.dropIndex,\n\t        models: {\n\t          source: this.sourceModel,\n\t          target: targetModel,\n\t          transit: dropElmModel\n\t        },\n\t        indexes: {\n\t          source: this.dragIndex,\n\t          target: this.dropIndex\n\t        }\n\t      });\n\t    }\n\n\t    /**\n\t     * If not copy, we remove model from source model after a nice transition\n\t     */\n\n\t  }, {\n\t    key: 'notCopy',\n\t    value: function notCopy() {\n\t      var _this = this;\n\n\t      waitForTransition(function () {\n\t        _this.sourceModel.removeAt(_this.dragIndex);\n\t      });\n\t    }\n\n\t    /**\n\t     * Cancel drop\n\t     * @param {*} target\n\t     */\n\n\t  }, {\n\t    key: 'cancelDrop',\n\t    value: function cancelDrop(target) {\n\t      this.log('No targetModel could be found for target:', {\n\t        target: target\n\t      });\n\t      this.log('in drake:', {\n\t        drake: this.drake\n\t      });\n\t      this.drake.cancel(true);\n\t    }\n\n\t    /**\n\t     * Handle drop model from source to target\n\t     * @param {*} dropElm\n\t     * @param {*} target\n\t     * @param {*} source\n\t     */\n\n\t  }, {\n\t    key: 'dropModelTarget',\n\t    value: function dropModelTarget(dropElm, target, source) {\n\t      this.log('dropModelTarget', {\n\t        dropElm: dropElm,\n\t        target: target,\n\t        source: source\n\t      });\n\t      var notCopy = this.dragElm === dropElm;\n\t      var targetModel = this.getModel(target);\n\t      var dropElmModel = notCopy ? this.dropElmModel() : this.jsonDropElmModel();\n\n\t      if (notCopy) {\n\t        this.notCopy();\n\t      }\n\n\t      if (!targetModel) {\n\t        return this.cancelDrop(target);\n\t      }\n\n\t      var elements = {\n\t        drop: dropElm,\n\t        target: target,\n\t        source: source\n\t      };\n\n\t      this.insertModel(targetModel, dropElmModel, elements);\n\t    }\n\t  }, {\n\t    key: 'dropModel',\n\t    value: function dropModel(dropElm, target, source) {\n\t      this.log('dropModel', {\n\t        dropElm: dropElm,\n\t        target: target,\n\t        source: source\n\t      });\n\t      target === source ? this.dropModelSame() : this.dropModelTarget(dropElm, target, source);\n\t    }\n\t  }, {\n\t    key: 'emit',\n\t    value: function emit(eventName) {\n\t      var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t      this.log('emit', {\n\t        eventName: eventName,\n\t        opts: opts\n\t      });\n\t      opts.sourceModel = this.sourceModel;\n\t      opts.name = this.name;\n\t      this.eventBus.$emit(eventName, opts);\n\n\t      this.log('emit service', {\n\t        serviceEventName: serviceEventName,\n\t        eventName: eventName,\n\t        opts: opts\n\t      });\n\t      var serviceEventName = this.serviceName + ':' + eventName;\n\t      this.eventBus.$emit(serviceEventName, opts);\n\t    }\n\n\t    /**\n\t     * Get model from location in\n\t     * @param {*} location\n\t     */\n\n\t  }, {\n\t    key: 'getModel',\n\t    value: function getModel(location) {\n\t      var model = this.findModelForContainer(location, this.drake);\n\t      this.log('getModel', {\n\t        location: location,\n\t        model: model\n\t      });\n\n\t      return this.modelManager.createFor({\n\t        name: this.name,\n\t        drake: this.drake,\n\t        logging: this.logging,\n\t        model: model\n\t      });\n\t    }\n\n\t    /**\n\t     * Remov element from container in source\n\t     * @param {*} el\n\t     * @param {*} container\n\t     * @param {*} source\n\t     */\n\n\t  }, {\n\t    key: 'remove',\n\t    value: function remove(el, container, source) {\n\t      this.log('remove', {\n\t        el: el,\n\t        container: container,\n\t        source: source\n\t      });\n\t      if (!this.drake.models) {\n\t        this.log('Warning: Can NOT remove it. Must have models:', this.drake.models);\n\t        return;\n\t      }\n\n\t      this.sourceModel = this.getModel(source);\n\t      this.removeModel();\n\t      this.drake.cancel(true);\n\n\t      this.emit('removeModel', {\n\t        el: el,\n\t        source: source,\n\t        dragIndex: this.dragIndex\n\t      });\n\t    }\n\n\t    /**\n\t     * Handle drag element from source\n\t     * @param {*} el\n\t     * @param {*} source\n\t     */\n\n\t  }, {\n\t    key: 'drag',\n\t    value: function drag(el, source) {\n\t      this.log('drag', {\n\t        el: el,\n\t        source: source\n\t      });\n\t      this.dragElm = el;\n\t      this.dragIndex = this.domIndexOf(el, source);\n\t    }\n\n\t    /**\n\t     * Handle drop element from source to target\n\t     * @param {*} dropEl\n\t     * @param {*} target\n\t     * @param {*} source\n\t     */\n\n\t  }, {\n\t    key: 'drop',\n\t    value: function drop(dropEl, target, source) {\n\t      this.log('drop', {\n\t        dropEl: dropEl,\n\t        target: target,\n\t        source: source\n\t      });\n\t      if (!this.drake.models && !target) {\n\t        this.log('Warning: Can NOT drop it. Must have either models:', this.drake.models, ' or target:', target);\n\t        return;\n\t      }\n\t      this.dropIndex = this.domIndexOf(dropEl, target);\n\t      this.sourceModel = this.getModel(source);\n\t      this.dropModel(dropEl, target, source);\n\n\t      this.emit('dropModel', {\n\t        target: target,\n\t        source: source,\n\t        el: dropEl,\n\t        dragIndex: this.dragIndex,\n\t        dropIndex: this.dropIndex\n\t      });\n\t    }\n\t  }, {\n\t    key: 'dropElmModel',\n\t    value: function dropElmModel() {\n\t      return this.sourceModel.at(this.dragIndex);\n\t    }\n\t  }, {\n\t    key: 'jsonDropElmModel',\n\t    value: function jsonDropElmModel() {\n\t      var model = this.sourceModel.at(this.dragIndex);\n\t      var stringable = model ? model.model || model.stringable : model;\n\t      var md = stringable || model;\n\t      if (!isObject(md)) {\n\t        this.log('jsonDropElmModel', 'invalid element model, must be some sort of Object', stringable, model);\n\t      }\n\t      try {\n\t        var jsonStr = JSON.stringify(stringable || model);\n\t        return JSON.parse(jsonStr);\n\t      } catch (e) {\n\t        this.log('jsonDropElmModel', 'JSON stringify/parse error', e);\n\t      }\n\t    }\n\t  }, {\n\t    key: 'clazzName',\n\t    get: function get() {\n\t      return this.constructor.name || 'DragHandler';\n\t    }\n\t  }, {\n\t    key: 'shouldLog',\n\t    get: function get() {\n\t      return this.logging && this.logging.dragHandler;\n\t    }\n\t  }]);\n\t  return DragHandler;\n\t}();\n\n\tvar BaseModelManager = function () {\n\t  function BaseModelManager() {\n\t    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t    classCallCheck(this, BaseModelManager);\n\n\t    if (Array.isArray(opts)) {\n\t      opts = {\n\t        model: opts\n\t      };\n\t    }\n\t    opts.drake = opts.drake || {};\n\t    this.opts = opts;\n\t    this.copy = opts.copy || opts.drake.copy;\n\t    this.name = opts.name;\n\t    this.drake = opts.drake;\n\t    this.logging = opts.logging;\n\t    this.logging = opts.logging;\n\t    this.modelRef = opts.model || [];\n\t  }\n\n\t  createClass(BaseModelManager, [{\n\t    key: 'log',\n\t    value: function log(event) {\n\t      var _console;\n\n\t      if (!this.shouldLog) return;\n\n\t      for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n\t        args[_key - 1] = arguments[_key];\n\t      }\n\n\t      (_console = console).log.apply(_console, [this.clazzName + ' [' + this.name + '] :', event].concat(args));\n\t    }\n\t  }, {\n\t    key: 'notYet',\n\t    value: function notYet(name) {\n\t      this.log(name, 'not yet implemented');\n\t    }\n\t  }, {\n\t    key: 'undo',\n\t    value: function undo() {\n\t      this.notYet('undo');\n\t    }\n\t  }, {\n\t    key: 'redo',\n\t    value: function redo() {\n\t      this.notYet('redo');\n\t    }\n\t  }, {\n\t    key: 'at',\n\t    value: function at(index) {\n\t      this.notYet('at');\n\t    }\n\t  }, {\n\t    key: 'clear',\n\t    value: function clear() {\n\t      this.notYet('clear');\n\t    }\n\t  }, {\n\t    key: 'createModel',\n\t    value: function createModel(model) {\n\t      this.notYet('createModel');\n\t    }\n\t  }, {\n\t    key: 'createFor',\n\t    value: function createFor() {\n\t      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n\t      this.notYet('createFor');\n\t    }\n\t  }, {\n\t    key: 'removeAt',\n\t    value: function removeAt(index) {\n\t      this.notYet('removeAt');\n\t    }\n\t  }, {\n\t    key: 'insertAt',\n\t    value: function insertAt(index, dropModel) {\n\t      this.notYet('removeAt');\n\t    }\n\t  }, {\n\t    key: 'move',\n\t    value: function move(_ref) {\n\t      var dragIndex = _ref.dragIndex,\n\t          dropIndex = _ref.dropIndex;\n\n\t      this.notYet('move');\n\t    }\n\t  }, {\n\t    key: 'clazzName',\n\t    get: function get() {\n\t      return this.constructor.name || 'BaseModelManager';\n\t    }\n\t  }, {\n\t    key: 'shouldLog',\n\t    get: function get() {\n\t      return this.logging && this.logging.modelManager;\n\t    }\n\t  }]);\n\t  return BaseModelManager;\n\t}();\n\n\tvar ModelManager = function (_BaseModelManager) {\n\t  inherits(ModelManager, _BaseModelManager);\n\n\t  function ModelManager() {\n\t    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t    classCallCheck(this, ModelManager);\n\n\t    var _this = possibleConstructorReturn(this, (ModelManager.__proto__ || Object.getPrototypeOf(ModelManager)).call(this, opts));\n\n\t    _this.model = _this.createModel(_this.modelRef);\n\t    _this.log('CREATE', opts);\n\t    return _this;\n\t  }\n\n\t  createClass(ModelManager, [{\n\t    key: 'log',\n\t    value: function log(event) {\n\t      var _console;\n\n\t      if (!this.shouldLog) return;\n\n\t      for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n\t        args[_key - 1] = arguments[_key];\n\t      }\n\n\t      (_console = console).log.apply(_console, [this.clazzName + ' [' + this.name + '] :', event].concat(args));\n\t    }\n\t  }, {\n\t    key: 'undo',\n\t    value: function undo() {\n\t      this.log('undo', 'not yet implemented');\n\t    }\n\t  }, {\n\t    key: 'redo',\n\t    value: function redo() {\n\t      this.log('redo', 'not yet implemented');\n\t    }\n\t  }, {\n\t    key: 'at',\n\t    value: function at(index) {\n\t      return this.model.get ? this.model.get(index) : this.model[index];\n\t    }\n\t  }, {\n\t    key: 'clear',\n\t    value: function clear() {\n\t      this.model = this.createModel();\n\t    }\n\t  }, {\n\t    key: 'createModel',\n\t    value: function createModel(model) {\n\t      return this.model || model || [];\n\t    }\n\t  }, {\n\t    key: 'createFor',\n\t    value: function createFor() {\n\t      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n\t      return new ModelManager(opts);\n\t    }\n\t  }, {\n\t    key: 'removeAt',\n\t    value: function removeAt(index) {\n\t      if (this.copy) return;\n\t      this.log('removeAt', {\n\t        model: this.model,\n\t        index: index\n\t      });\n\t      var splicedModel = this.model.splice(index, 1);\n\t      var removedModel = this.model;\n\n\t      this.log({\n\t        splicedModel: splicedModel,\n\t        removedModel: removedModel\n\t      });\n\t      return splicedModel;\n\t    }\n\t  }, {\n\t    key: 'insertAt',\n\t    value: function insertAt(index, insertModel) {\n\t      this.log('insertAt', {\n\t        model: this.model,\n\t        index: index,\n\t        insertModel: insertModel\n\t      });\n\t      // according to Vue docs, Vue wraps splice method to mutate array in place and update view\n\t      var splicedModel = this.model.splice(index, 0, insertModel);\n\t      var modelAfterInsert = this.model;\n\n\t      this.log('insertAt', {\n\t        splicedModel: splicedModel,\n\t        modelAfterInsert: modelAfterInsert\n\t      });\n\t      return modelAfterInsert;\n\t    }\n\t  }, {\n\t    key: 'move',\n\t    value: function move(_ref) {\n\t      var dragIndex = _ref.dragIndex,\n\t          dropIndex = _ref.dropIndex;\n\n\t      if (this.copy) return;\n\t      this.log('move', {\n\t        model: this.model,\n\t        dragIndex: dragIndex,\n\t        dropIndex: dropIndex\n\t      });\n\t      var splicedRemainder = this.model.splice(dragIndex, 1);\n\t      var remainder = splicedRemainder[0];\n\n\t      var modelAfterRemove = this.model.splice(dropIndex, 0, remainder);\n\t      var movedModel = this.model;\n\n\t      this.log('move', {\n\t        splicedRemainder: splicedRemainder,\n\t        modelAfterRemove: modelAfterRemove,\n\t        movedModel: movedModel\n\t      });\n\t      return modelAfterRemove;\n\t    }\n\t  }, {\n\t    key: 'clazzName',\n\t    get: function get() {\n\t      return this.constructor.name || 'ModelManager';\n\t    }\n\t  }, {\n\t    key: 'shouldLog',\n\t    get: function get() {\n\t      return this.logging && this.logging.modelManager;\n\t    }\n\t  }]);\n\t  return ModelManager;\n\t}(BaseModelManager);\n\n\tif (!dragula$1) {\n\t  throw new Error('[vue-dragula] cannot locate dragula.');\n\t}\n\n\tfunction createDragHandler(_ref) {\n\t  var ctx = _ref.ctx,\n\t      name = _ref.name,\n\t      drake = _ref.drake;\n\n\t  return new DragHandler({\n\t    ctx: ctx,\n\t    name: name,\n\t    drake: drake\n\t  });\n\t}\n\n\tfunction createModelManager(opts) {\n\t  return new ModelManager(opts);\n\t}\n\n\tvar DragulaService = function () {\n\t  function DragulaService() {\n\t    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t    classCallCheck(this, DragulaService);\n\t    var name = opts.name,\n\t        eventBus = opts.eventBus,\n\t        drakes = opts.drakes,\n\t        options = opts.options;\n\n\t    options = options || {};\n\t    this.options = options;\n\t    this.logging = options.logging;\n\n\t    this.log('CREATE DragulaService', opts);\n\n\t    this.name = name;\n\t    this.drakes = drakes || {}; // drake store\n\t    this.eventBus = eventBus;\n\t    this.createDragHandler = options.createDragHandler || createDragHandler;\n\t    this.createModelManager = options.createModelManager || createModelManager;\n\n\t    this.modelManager = this.createModelManager(options);\n\n\t    // Dragula events supported\n\t    this.events = ['cancel', 'cloned', 'drag', 'dragend', 'drop', 'out', 'over', 'remove', 'shadow', 'dropModel', 'removeModel', 'accepts', 'moves', 'invalid'];\n\t  }\n\n\t  createClass(DragulaService, [{\n\t    key: 'addEvents',\n\t    value: function addEvents() {\n\t      var _events;\n\n\t      this.events = (_events = this.events).concat.apply(_events, arguments);\n\t    }\n\t  }, {\n\t    key: 'removeEvents',\n\t    value: function removeEvents() {\n\t      for (var _len = arguments.length, eventNames = Array(_len), _key = 0; _key < _len; _key++) {\n\t        eventNames[_key] = arguments[_key];\n\t      }\n\n\t      this.events = this.events.filter(function (name) {\n\t        return eventNames.includes(name);\n\t      });\n\t    }\n\t  }, {\n\t    key: 'createModel',\n\t    value: function createModel() {\n\t      return this.modelManager.createModel();\n\t    }\n\t  }, {\n\t    key: 'log',\n\t    value: function log(event) {\n\t      var _console;\n\n\t      if (!this.shouldLog) return;\n\n\t      for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n\t        args[_key2 - 1] = arguments[_key2];\n\t      }\n\n\t      (_console = console).log.apply(_console, ['DragulaService [' + this.name + '] :', event].concat(args));\n\t    }\n\t  }, {\n\t    key: 'error',\n\t    value: function error(msg) {\n\t      console.error(msg);\n\t      throw new Error(msg);\n\t    }\n\t  }, {\n\t    key: '_validate',\n\t    value: function _validate(method, name) {\n\t      if (!name) {\n\t        this.error(method + ' must take a drake name as the first argument');\n\t      }\n\t    }\n\t  }, {\n\t    key: 'add',\n\t    value: function add(name, drake) {\n\t      this.log('add (drake)', name, drake);\n\t      this._validate('add', name);\n\t      if (this.find(name)) {\n\t        this.log('existing drakes', this.drakeNames);\n\t        var errMsg = 'Drake named: \"' + name + '\" already exists for this service [' + this.name + '].\\n      Most likely this error in cause by a race condition evaluating multiple template elements with\\n      the v-dragula directive having the same drake name. Please initialise the drake in the created() life cycle hook of the VM to fix this problem.';\n\t        this.error(errMsg);\n\t      }\n\n\t      this.drakes[name] = drake;\n\t      if (drake.models) {\n\t        this.handleModels(name, drake);\n\t      }\n\t      if (!drake.initEvents) {\n\t        this.setupEvents(name, drake);\n\t      }\n\t      return drake;\n\t    }\n\t  }, {\n\t    key: 'find',\n\t    value: function find(name) {\n\t      this.log('find (drake) by name', name);\n\t      this._validate('find', name);\n\t      return this.drakes[name];\n\t    }\n\t  }, {\n\t    key: 'handleModels',\n\t    value: function handleModels(name, drake) {\n\t      this.log('handleModels', name, drake);\n\t      this._validate('handleModels', name);\n\t      if (drake.registered) {\n\t        // do not register events twice\n\t        this.log('handleModels', 'already registered');\n\t        return;\n\t      }\n\n\t      var dragHandler = this.createDragHandler({\n\t        ctx: this,\n\t        name: name,\n\t        drake: drake\n\t      });\n\t      this.log('created dragHandler for service', dragHandler);\n\n\t      drake.on('remove', dragHandler.remove.bind(dragHandler));\n\t      drake.on('drag', dragHandler.drag.bind(dragHandler));\n\t      drake.on('drop', dragHandler.drop.bind(dragHandler));\n\n\t      drake.registered = true;\n\t    }\n\n\t    // convenience to set eventBus handlers via Object\n\n\t  }, {\n\t    key: 'on',\n\t    value: function on() {\n\t      var _this2 = this;\n\n\t      var handlerConfig = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n\t      this.log('on (events) ', handlerConfig);\n\t      Object.keys(handlerConfig).forEach(function (handlerName) {\n\t        var handlerFunction = handlerConfig[handlerName];\n\t        _this2.log('$on', handlerName, handlerFunction);\n\t        _this2.eventBus.$on(handlerName, handlerFunction);\n\t      });\n\t    }\n\t  }, {\n\t    key: 'destroy',\n\t    value: function destroy(name) {\n\t      this.log('destroy (drake) ', name);\n\t      this._validate('destroy', name);\n\t      var drake = this.find(name);\n\t      if (!drake) {\n\t        return;\n\t      }\n\t      drake.destroy();\n\t      this._delete(name);\n\t    }\n\t  }, {\n\t    key: '_delete',\n\t    value: function _delete(name) {\n\t      delete this.drakes[name];\n\t    }\n\t  }, {\n\t    key: 'setOptions',\n\t    value: function setOptions(name, options) {\n\t      this.log('setOptions (drake)', name, options);\n\t      this._validate('setOptions', name);\n\t      var drake = this.add(name, dragula$1(options));\n\t      this.handleModels(name, drake);\n\t      return this;\n\t    }\n\t  }, {\n\t    key: 'calcOpts',\n\t    value: function calcOpts(name, args) {\n\t      function noOpts() {\n\t        return {};\n\t      }\n\t      var argEventMap = this.argsEventMap[name] || this.argsEventMap.defaultEvent || noOpts;\n\t      return argEventMap(args);\n\t    }\n\t  }, {\n\t    key: 'setupEvents',\n\t    value: function setupEvents(name) {\n\t      var drake = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t      this.log('setupEvents', name, drake);\n\t      this._validate('setupEvents', name);\n\t      drake.initEvents = true;\n\t      var _this = this;\n\n\t      var emitter = function emitter(type) {\n\t        _this.log('emitter', type);\n\n\t        function replicate() {\n\t          var args = Array.prototype.slice.call(arguments);\n\t          var opts = _this.calcOpts(name, args);\n\t          opts.name = name;\n\t          opts.service = this;\n\t          opts.drake = drake;\n\t          _this.log('eventBus.$emit', type, name, opts);\n\t          _this.eventBus.$emit(type, opts);\n\t          _this.eventBus.$emit(this.name + ':' + type, opts);\n\t        }\n\n\t        drake.on(type, replicate);\n\t      };\n\t      this.events.forEach(emitter);\n\t    }\n\t  }, {\n\t    key: 'domIndexOf',\n\t    value: function domIndexOf(child, parent) {\n\t      return Array.prototype.indexOf.call(parent.children, child);\n\t    }\n\t  }, {\n\t    key: 'findModelForContainer',\n\t    value: function findModelForContainer(container, drake) {\n\t      this.log('findModelForContainer', container, drake);\n\t      return (this.findModelContainerByContainer(container, drake) || {}).model;\n\t    }\n\t  }, {\n\t    key: 'findModelContainerByContainer',\n\t    value: function findModelContainerByContainer(container, drake) {\n\t      if (!drake.models) {\n\t        this.log('findModelContainerByContainer', 'warning: no models found');\n\t        return;\n\t      }\n\t      var found = drake.models.find(function (model) {\n\t        return model.container === container;\n\t      });\n\t      if (!found) {\n\t        this.log('No matching model could be found for container:', container);\n\t        this.log('in drake', drake.name, ' models:', drake.models);\n\t      }\n\t      return found;\n\t    }\n\t  }, {\n\t    key: 'shouldLog',\n\t    get: function get() {\n\t      return this.logging && this.logging.service;\n\t    }\n\t  }, {\n\t    key: 'drakeNames',\n\t    get: function get() {\n\t      return Object.keys(this.drakes);\n\t    }\n\t  }, {\n\t    key: 'argsEventMap',\n\t    get: function get() {\n\t      this._argsEventMap = this._argsEventMap || this.defaultArgsEventMap;\n\t      return this._argsEventMap;\n\t    },\n\t    set: function set(customArgsEventMap) {\n\t      this._argsEventMap = customArgsEventMap;\n\t    }\n\t  }, {\n\t    key: 'defaultArgsEventMap',\n\t    get: function get() {\n\t      return {\n\t        cloned: function cloned(args) {\n\t          return {\n\t            clone: args[0],\n\t            original: args[1],\n\t            type: args[2]\n\t          };\n\t        },\n\t        moves: function moves(args) {\n\t          return {\n\t            el: args[0],\n\t            source: args[1],\n\t            handle: args[2],\n\t            sibling: args[3]\n\t          };\n\t        },\n\t        copy: function copy(args) {\n\t          return {\n\t            el: args[0],\n\t            source: args[1]\n\t          };\n\t        },\n\t        accepts: function accepts(args) {\n\t          return {\n\t            el: args[0],\n\t            target: args[1],\n\t            source: args[2],\n\t            sibling: args[3]\n\t          };\n\t        },\n\t        invalid: function invalid(args) {\n\t          return {\n\t            el: args[0],\n\t            handle: args[1]\n\t          };\n\t        },\n\t        drag: function drag(args) {\n\t          return {\n\t            el: args[0],\n\t            source: args[1]\n\t          };\n\t        },\n\t        dragend: function dragend(args) {\n\t          return {\n\t            el: args[0]\n\t          };\n\t        },\n\t        drop: function drop(args) {\n\t          return {\n\t            el: args[0],\n\t            target: args[1],\n\t            source: args[2],\n\t            sibling: args[3]\n\t          };\n\t        },\n\t        defaultEvent: function defaultEvent(args) {\n\t          return {\n\t            el: args[0],\n\t            container: args[1],\n\t            source: args[2]\n\t          };\n\t        }\n\t      };\n\t    }\n\t  }]);\n\t  return DragulaService;\n\t}();\n\n\tif (!dragula$1) {\n\t  throw new Error('[vue-dragula] cannot locate dragula.');\n\t}\n\n\tvar defaults = {\n\t  createService: function createService(_ref) {\n\t    var name = _ref.name,\n\t        eventBus = _ref.eventBus,\n\t        drakes = _ref.drakes,\n\t        options = _ref.options;\n\n\t    return new DragulaService({\n\t      name: name,\n\t      eventBus: eventBus,\n\t      drakes: drakes,\n\t      options: options\n\t    });\n\t  },\n\t  createEventBus: function createEventBus(Vue) {\n\t    return new Vue();\n\t  }\n\t};\n\n\tfunction isEmpty(str) {\n\t  if (!str) return true;\n\t  if (str.length === 0) return true;\n\t  return false;\n\t}\n\n\tfunction VueDragula (Vue) {\n\t  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t  // set full fine-grained logging if true\n\t  if (options.logging === true) {\n\t    options.logging = {\n\t      plugin: true,\n\t      directive: true,\n\t      service: true,\n\t      dragHandler: true\n\t    };\n\t  }\n\n\t  function logPlugin() {\n\t    var _console;\n\n\t    if (!options.logging) return;\n\t    if (!options.logging.plugin) return;\n\n\t    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t      args[_key] = arguments[_key];\n\t    }\n\n\t    (_console = console).log.apply(_console, ['vue-dragula plugin'].concat(args));\n\t  }\n\n\t  function logServiceConfig() {\n\t    var _console2;\n\n\t    if (!options.logging) return;\n\t    if (!options.logging.service) return;\n\n\t    for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n\t      args[_key2] = arguments[_key2];\n\t    }\n\n\t    (_console2 = console).log.apply(_console2, ['vue-dragula service config: '].concat(args));\n\t  }\n\n\t  function logDir() {\n\t    var _console3;\n\n\t    if (!options.logging) return;\n\t    if (!options.logging.directive) return;\n\n\t    for (var _len3 = arguments.length, args = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n\t      args[_key3] = arguments[_key3];\n\t    }\n\n\t    (_console3 = console).log.apply(_console3, ['v-dragula directive'].concat(args));\n\t  }\n\n\t  logPlugin('Initializing vue-dragula plugin', options);\n\n\t  var _createService = options.createService || defaults.createService;\n\t  var createEventBus = options.createEventBus || defaults.createEventBus || new Vue();\n\n\t  logPlugin('create eventBus', createEventBus);\n\t  var eventBus = createEventBus(Vue, options);\n\n\t  if (!eventBus) {\n\t    console.warn('Eventbus could not be created');\n\t    throw new Error('Eventbus could not be created');\n\t  }\n\n\t  logPlugin('eventBus created', eventBus);\n\n\t  // global service\n\t  var appService = _createService({\n\t    name: 'global.dragula',\n\t    eventBus: eventBus,\n\t    drakes: options.drakes,\n\t    options: options\n\t  });\n\n\t  var globalName = 'globalDrake';\n\n\t  var Dragula = function () {\n\t    function Dragula(options) {\n\t      classCallCheck(this, Dragula);\n\n\t      this.options = options;\n\n\t      // convenience functions on global service\n\t      this.$service = {\n\t        options: appService.setOptions.bind(appService),\n\t        find: appService.find.bind(appService),\n\t        eventBus: appService.eventBus\n\t        // add default drake on global app service\n\t      };this.$service.options('default', {});\n\n\t      // alias\n\t      this.createServices = this.createService;\n\t    }\n\n\t    createClass(Dragula, [{\n\t      key: 'optionsFor',\n\t      value: function optionsFor(name) {\n\t        var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t        this.service(name).setOptions(opts);\n\t        return this;\n\t      }\n\t    }, {\n\t      key: 'createService',\n\t      value: function createService() {\n\t        var _this = this;\n\n\t        var serviceOpts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n\t        logServiceConfig('createService', serviceOpts);\n\n\t        this._serviceMap = this._serviceMap || {};\n\n\t        var names = serviceOpts.names || [];\n\t        var name = serviceOpts.name || [];\n\t        var drakes = serviceOpts.drakes || {};\n\t        var drake = serviceOpts.drake;\n\t        var opts = Object.assign({}, options, serviceOpts);\n\t        names = names.length > 0 ? names : [name];\n\t        var eventBus = serviceOpts.eventBus || appService.eventBus;\n\t        if (!eventBus) {\n\t          console.warn('Eventbus could not be created', eventBus);\n\t        }\n\n\t        logServiceConfig('names', names);\n\t        names.forEach(function (name) {\n\t          var createOpts = {\n\t            name: name,\n\t            eventBus: eventBus,\n\t            options: opts\n\t          };\n\t          logServiceConfig('create DragulaService', name, createOpts);\n\t          _this._serviceMap[name] = _createService(createOpts);\n\n\t          // use 'default' drakes if none specified\n\t          if (!drakes.default) {\n\t            drakes.default = drake || true;\n\t          }\n\n\t          _this.drakesFor(name, drakes);\n\t        });\n\t        return this;\n\t      }\n\t    }, {\n\t      key: 'drakesFor',\n\t      value: function drakesFor(name) {\n\t        var drakes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t        logServiceConfig('drakesFor', name, drakes);\n\t        var service = this.service(name);\n\n\t        if (Array.isArray(drakes)) {\n\t          // turn Array into object of [name]: true\n\t          drakes = drakes.reduce(function (obj, name) {\n\t            obj[name] = true;\n\t            return obj;\n\t          }, {});\n\t        }\n\n\t        Object.keys(drakes).forEach(function (drakeName) {\n\t          var drakeOpts = drakes[drakeName];\n\t          if (drakeOpts === true) {\n\t            drakeOpts = {};\n\t          }\n\n\t          service.setOptions(drakeName, drakeOpts);\n\t        });\n\t        return this;\n\t      }\n\t    }, {\n\t      key: 'on',\n\t      value: function on(name) {\n\t        var _this2 = this;\n\n\t        var handlerConfig = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t        logServiceConfig('on', name, handlerConfig);\n\t        if ((typeof name === 'undefined' ? 'undefined' : _typeof(name)) === 'object') {\n\t          handlerConfig = name;\n\t          // add event handlers for all services\n\t          var serviceNames = this.serviceNames;\n\n\t          if (!serviceNames || serviceNames.length < 1) {\n\t            console.warn('vue-dragula: No services found to add events handlers for', this._serviceMap);\n\t            return this;\n\t          }\n\n\t          logServiceConfig('add event handlers for', serviceNames);\n\t          serviceNames.forEach(function (serviceName) {\n\t            _this2.on(serviceName, handlerConfig);\n\t          });\n\t          return this;\n\t        }\n\n\t        var service = this.service(name);\n\t        if (!service) {\n\t          console.warn('vue-dragula: no service ' + name + ' to add event handlers for');\n\t          return this;\n\t        }\n\t        logServiceConfig('service.on', service, handlerConfig);\n\t        service.on(handlerConfig);\n\t        return this;\n\t      }\n\t    }, {\n\t      key: 'service',\n\n\n\t      // return named service or first service\n\t      value: function service(name) {\n\t        if (!this._serviceMap) return;\n\n\t        var found = this._serviceMap[name];\n\t        logServiceConfig('lookup service', name, found);\n\n\t        if (!found) {\n\t          logServiceConfig('not found by name, get default');\n\t          var keys = this.serviceNames;\n\t          if (keys) {\n\t            found = this._serviceMap[keys[0]];\n\t          }\n\t        }\n\t        return found;\n\t      }\n\t    }, {\n\t      key: 'serviceNames',\n\t      get: function get() {\n\t        return Object.keys(this._serviceMap);\n\t      }\n\t    }, {\n\t      key: 'services',\n\t      get: function get() {\n\t        return Object.values(this._serviceMap);\n\t      }\n\t    }]);\n\t    return Dragula;\n\t  }();\n\n\t  Vue.$dragula = new Dragula(options);\n\n\t  var drakeContainers = {};\n\n\t  Vue.prototype.$dragula = Vue.$dragula;\n\n\t  function findService(name, vnode, serviceName) {\n\t    // first try to register on DragulaService of component\n\t    if (vnode) {\n\t      var _dragula = vnode.context.$dragula;\n\t      if (_dragula) {\n\t        logDir('trying to find and use component service');\n\n\t        var componentService = _dragula.service(serviceName);\n\t        if (componentService) {\n\t          logDir('using component service', componentService);\n\t          return componentService;\n\t        }\n\t      }\n\t    }\n\t    logDir('using global service', appService);\n\t    return appService;\n\t  }\n\n\t  function calcNames(name, vnode, ctx) {\n\t    var drakeName = vnode ? vnode.data.attrs.drake : this.params.drake;\n\t    var serviceName = vnode ? vnode.data.attrs.service : this.params.service;\n\n\t    if (drakeName !== undefined && drakeName.length !== 0) {\n\t      name = drakeName;\n\t    }\n\t    drakeName = isEmpty(drakeName) ? 'default' : drakeName;\n\n\t    return {\n\t      name: name,\n\t      drakeName: drakeName,\n\t      serviceName: serviceName\n\t    };\n\t  }\n\n\t  function updateDirective(container, binding, vnode, oldVnode) {\n\t    logDir('updateDirective');\n\t    var newValue = vnode ? binding.value : container;\n\t    if (!newValue) {\n\t      return;\n\t    }\n\n\t    var _calcNames = calcNames(globalName, vnode, this),\n\t        name = _calcNames.name,\n\t        drakeName = _calcNames.drakeName,\n\t        serviceName = _calcNames.serviceName;\n\n\t    var service = findService(name, vnode, serviceName);\n\t    var drake = service.find(drakeName, vnode);\n\n\t    drakeContainers[drakeName] = drakeContainers[drakeName] || [];\n\t    var dc = drakeContainers[drakeName];\n\n\t    // skip if has already been configured (same container in same drake)\n\t    if (dc) {\n\t      var found = dc.find(function (c) {\n\t        return c === container;\n\t      });\n\t      if (found) {\n\t        logDir('already has drake container configured', drakeName, container);\n\t        return;\n\t      }\n\t    }\n\n\t    if (!service) {\n\t      logDir('no service found', name, drakeName);\n\t      return;\n\t    }\n\n\t    if (!drake.models) {\n\t      drake.models = [];\n\t    }\n\n\t    if (!vnode) {\n\t      container = this.el; // Vue 1\n\t    }\n\n\t    var modelContainer = service.findModelContainerByContainer(container, drake);\n\n\t    dc.push(container);\n\n\t    logDir('DATA', {\n\t      service: {\n\t        name: serviceName,\n\t        instance: service\n\t      },\n\t      drake: {\n\t        name: drakeName,\n\t        instance: drake\n\t      },\n\t      container: container,\n\t      modelContainer: modelContainer\n\t    });\n\n\t    if (modelContainer) {\n\t      logDir('set model of container', newValue);\n\t      modelContainer.model = newValue;\n\t    } else {\n\t      logDir('push model and container on drake', newValue, container);\n\t      drake.models.push({\n\t        model: newValue,\n\t        container: container\n\t      });\n\t    }\n\t  }\n\n\t  Vue.directive('dragula', {\n\t    params: ['drake', 'service'],\n\n\t    bind: function bind(container, binding, vnode) {\n\t      logDir('BIND', container, binding, vnode);\n\n\t      var _calcNames2 = calcNames(globalName, vnode, this),\n\t          name = _calcNames2.name,\n\t          drakeName = _calcNames2.drakeName,\n\t          serviceName = _calcNames2.serviceName;\n\n\t      var service = findService(name, vnode, serviceName);\n\t      var drake = service.find(drakeName, vnode);\n\n\t      if (!vnode) {\n\t        container = this.el; // Vue 1\n\t      }\n\n\t      logDir({\n\t        service: {\n\t          name: serviceName,\n\t          instance: service\n\t        },\n\t        drake: {\n\t          name: drakeName,\n\t          instance: drake\n\t        },\n\t        container: container\n\t      });\n\n\t      if (drake) {\n\t        drake.containers.push(container);\n\t        return;\n\t      }\n\t      var newDrake = dragula$1({\n\t        containers: [container]\n\t      });\n\t      service.add(name, newDrake);\n\n\t      service.handleModels(name, newDrake);\n\t    },\n\t    update: function update(container, binding, vnode, oldVnode) {\n\t      logDir('UPDATE', container, binding, vnode);\n\t      // Vue 1\n\t      if (Vue.version === 1) {\n\t        updateDirective(container, binding, vnode, oldVnode);\n\t      }\n\t    },\n\t    componentUpdated: function componentUpdated(container, binding, vnode, oldVnode) {\n\t      logDir('COMPONENT UPDATED', container, binding, vnode);\n\t    },\n\t    inserted: function inserted(container, binding, vnode, oldVnode) {\n\t      logDir('INSERTED', container, binding, vnode);\n\t      // Vue 2\n\t      updateDirective(container, binding, vnode, oldVnode);\n\t    },\n\t    unbind: function unbind(container, binding, vnode) {\n\t      logDir('UNBIND', container, binding, vnode);\n\n\t      var _calcNames3 = calcNames(globalName, vnode, this),\n\t          name = _calcNames3.name,\n\t          drakeName = _calcNames3.drakeName,\n\t          serviceName = _calcNames3.serviceName;\n\n\t      var service = findService(name, vnode, serviceName);\n\t      var drake = service.find(drakeName, vnode);\n\n\t      logDir({\n\t        service: {\n\t          name: serviceName,\n\t          instance: service\n\t        },\n\t        drake: {\n\t          name: drakeName,\n\t          instance: drake\n\t        },\n\t        container: container\n\t      });\n\n\t      if (!drake) {\n\t        return;\n\t      }\n\n\t      var containerIndex = drake.containers.indexOf(container);\n\n\t      if (containerIndex > -1) {\n\t        logDir('remove container', containerIndex);\n\t        drake.containers.splice(containerIndex, 1);\n\t      }\n\n\t      if (drake.containers.length === 0) {\n\t        logDir('destroy service');\n\t        service.destroy(name);\n\t      }\n\t    }\n\t  });\n\t}\n\n\tvar TimeMachine = function () {\n\t  function TimeMachine(_ref) {\n\t    var name = _ref.name,\n\t        model = _ref.model,\n\t        modelRef = _ref.modelRef,\n\t        history = _ref.history,\n\t        logging = _ref.logging;\n\t    classCallCheck(this, TimeMachine);\n\n\t    this.name = name || 'default';\n\t    this.model = model;\n\t    this.modelRef = modelRef;\n\t    this.logging = logging;\n\t    this.history = history || this.createHistory();\n\t    this.history.push(this.model);\n\t    this.timeIndex = 0;\n\t  }\n\n\t  createClass(TimeMachine, [{\n\t    key: 'log',\n\t    value: function log(event) {\n\t      var _console;\n\n\t      if (!this.shouldLog) return;\n\n\t      for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n\t        args[_key - 1] = arguments[_key];\n\t      }\n\n\t      (_console = console).log.apply(_console, [this.clazzName + ' [' + this.name + '] :', event].concat(args));\n\t    }\n\t  }, {\n\t    key: 'createHistory',\n\t    value: function createHistory() {\n\t      return this.history || [];\n\t    }\n\t  }, {\n\t    key: 'timeTravel',\n\t    value: function timeTravel(index) {\n\t      this.log('timeTravel to', index);\n\t      this.model = this.history[index];\n\t      this.updateModelRef();\n\t      return this;\n\t    }\n\t  }, {\n\t    key: 'updateModelRef',\n\t    value: function updateModelRef() {\n\t      var _this = this;\n\n\t      // this.modelRef = mutable\n\t      // this.log('set modelRef', this.modelRef, this.model)\n\t      this.modelRef.splice(0, this.modelRef.length);\n\t      this.model.forEach(function (item) {\n\t        _this.modelRef.push(item);\n\t      });\n\t    }\n\t  }, {\n\t    key: 'undo',\n\t    value: function undo() {\n\t      this.log('undo timeIndex', this.timeIndex);\n\t      if (this.timeIndex === 0) {\n\t        return false;\n\t      }\n\t      this.timeIndex--;\n\t      this.timeTravel(this.timeIndex);\n\t      return this;\n\t    }\n\t  }, {\n\t    key: 'redo',\n\t    value: function redo() {\n\t      this.log('redo timeIndex', this.timeIndex, this.history.length);\n\t      if (this.timeIndex > this.history.length - 1) {\n\t        return false;\n\t      }\n\t      this.timeIndex++;\n\t      this.timeTravel(this.timeIndex);\n\t      return this;\n\t    }\n\t  }, {\n\t    key: 'addToHistory',\n\t    value: function addToHistory(newModel) {\n\t      this.log('addToHistory');\n\t      this.log('old', this.model);\n\t      this.log('new', newModel);\n\t      this.model = newModel;\n\t      this.log('model was set to', this.model);\n\t      this.history.push(newModel);\n\t      this.timeIndex++;\n\t      this.updateModelRef();\n\t      return this;\n\t    }\n\t  }, {\n\t    key: 'shouldLog',\n\t    get: function get() {\n\t      return this.logging && this.logging.modelManager;\n\t    }\n\t  }, {\n\t    key: 'clazzName',\n\t    get: function get() {\n\t      return this.constructor.name || 'TimeMachine';\n\t    }\n\t  }]);\n\t  return TimeMachine;\n\t}();\n\n\tvar createDefaultTimeMachine = function createDefaultTimeMachine(opts) {\n\t  return new TimeMachine(opts);\n\t};\n\n\tvar ImmutableModelManager = function (_ModelManager) {\n\t  inherits(ImmutableModelManager, _ModelManager);\n\n\t  function ImmutableModelManager() {\n\t    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t    classCallCheck(this, ImmutableModelManager);\n\n\t    var _this = possibleConstructorReturn(this, (ImmutableModelManager.__proto__ || Object.getPrototypeOf(ImmutableModelManager)).call(this, opts));\n\n\t    _this.timeOut = opts.timeOut || 800;\n\t    var createTimeMachine = opts.createTimeMachine || createDefaultTimeMachine;\n\t    _this.timeMachine = createTimeMachine(Object.assign(opts, {\n\t      model: _this.model,\n\t      modelRef: _this.modelRef\n\t    }));\n\t    return _this;\n\t  }\n\n\t  createClass(ImmutableModelManager, [{\n\t    key: 'timeTravel',\n\n\n\t    /**\n\t     * Travel to specific point in action history stack\n\t     * @param {*} index\n\t     */\n\t    value: function timeTravel(index) {\n\t      return this.timeMachine.timeTravel(index);\n\t    }\n\n\t    /**\n\t     * Undo previous action from history\n\t     */\n\n\t  }, {\n\t    key: 'undo',\n\t    value: function undo() {\n\t      // this.log('UNDO', this.timeMachine)\n\t      this.timeMachine.undo();\n\t      return this;\n\t    }\n\n\t    /**\n\t     * Redo undone action\n\t     */\n\n\t  }, {\n\t    key: 'redo',\n\t    value: function redo() {\n\t      // this.log('REDO', this.timeMachine)\n\t      this.timeMachine.redo();\n\t      return this;\n\t    }\n\t  }, {\n\t    key: 'addToHistory',\n\t    value: function addToHistory(model) {\n\t      this.timeMachine.addToHistory(model);\n\t      return this;\n\t    }\n\n\t    // override with Immutable\n\n\t  }, {\n\t    key: 'createModel',\n\t    value: function createModel(model) {\n\t      return model || [];\n\t    }\n\n\t    // TODO: add to history!?\n\n\t  }, {\n\t    key: 'createFor',\n\t    value: function createFor() {\n\t      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n\t      return new ImmutableModelManager(opts);\n\t    }\n\t  }, {\n\t    key: 'isEmpty',\n\t    value: function isEmpty() {\n\t      return this.model.length === 0;\n\t    }\n\t  }, {\n\t    key: 'actionUpdateModel',\n\t    value: function actionUpdateModel(newModel) {\n\t      var _this2 = this;\n\n\t      setTimeout(function () {\n\t        _this2.addToHistory(newModel);\n\t      }, this.timeOut || 800);\n\t    }\n\n\t    /**\n\t     * Removes item at index\n\t     * @param {*} index\n\t     */\n\n\t  }, {\n\t    key: 'removeAt',\n\t    value: function removeAt(index) {\n\t      if (this.copy) return;\n\t      this.log('removeAt', {\n\t        model: this.model,\n\t        index: index\n\t      });\n\t      // create new model with self excluded\n\t      var before = this.model.slice(0, index);\n\t      var exclAfter = this.model.slice(index + 1);\n\n\t      this.log('removeAt: concat', before, exclAfter);\n\t      var newModel = this.createModel().concat(before, exclAfter);\n\n\t      this.actionUpdateModel(newModel);\n\t      return newModel;\n\t    }\n\n\t    /**\n\t     * Inserts a dropModel at specific index\n\t     * NOTE: Copy needs to insert the copied item only, no remove or move involved\n\t     * @param {*} index\n\t     * @param {*} dropModel\n\t     */\n\n\t  }, {\n\t    key: 'insertAt',\n\t    value: function insertAt(index, insertModel) {\n\t      this.log('insertAt', {\n\t        model: this.model,\n\t        index: index,\n\t        insertModel: insertModel\n\t      });\n\n\t      // create new model with new inserted\n\n\t      // Slice off the items BEFORE the insertion index\n\t      var itemsBefore = this.sliceBefore(index);\n\n\t      // Slice off the items ATER the insertion index\n\t      var itemsAfter = this._sliceAfter(index);\n\n\t      this.log('insertAt: concat', {\n\t        itemsBefore: itemsBefore,\n\t        insertModel: insertModel,\n\t        itemsAfter: itemsAfter\n\t      });\n\n\t      var newModel = this._createNewModelFromInsert(itemsBefore, insertModel, itemsAfter);\n\n\t      this.log({\n\t        newModel: newModel\n\t      });\n\n\t      this.actionUpdateModel(newModel);\n\t      return newModel;\n\t    }\n\t  }, {\n\t    key: '_createNewModelFromInsert',\n\t    value: function _createNewModelFromInsert(itemsBefore, insertItem, itemsAfter) {\n\t      return this.createModel().concat(itemsBefore, insertItem, itemsAfter);\n\t    }\n\n\t    /**\n\t     * Slice off the items before the insertion index\n\t     * @param {*} index\n\t     */\n\n\t  }, {\n\t    key: '_sliceBefore',\n\t    value: function _sliceBefore(index) {\n\t      return this.model.slice(0, index);\n\t    }\n\n\t    /**\n\t     * Slice off the items after the insertion index\n\t     * @param {*} index\n\t     */\n\n\t  }, {\n\t    key: '_sliceAfter',\n\t    value: function _sliceAfter(index) {\n\t      this.model.slice(index);\n\t    }\n\n\t    /**\n\t     * Moves item from one index to another\n\t     * NOTE: If we are doing a copy, we should never perform a move (ie. a remove and insert)\n\t     * @param {*} param0\n\t     */\n\n\t  }, {\n\t    key: 'move',\n\t    value: function move(_ref) {\n\t      var dragIndex = _ref.dragIndex,\n\t          dropIndex = _ref.dropIndex;\n\n\t      if (this.copy) return;\n\t      this.log('move', {\n\t        model: this.model,\n\t        dragIndex: dragIndex,\n\t        dropIndex: dropIndex\n\t      });\n\t      this.timeMachine.undo();\n\t      return this;\n\t    }\n\t  }, {\n\t    key: 'clazzName',\n\t    get: function get() {\n\t      return this.constructor.name || 'ImmutableModelManager';\n\t    }\n\t  }, {\n\t    key: 'model',\n\t    get: function get() {\n\t      return this.timeMachine ? this.timeMachine.model : this._model;\n\t    }\n\t  }, {\n\t    key: 'history',\n\t    get: function get() {\n\t      return this.timeMachine.history;\n\t    }\n\t  }, {\n\t    key: 'timeIndex',\n\t    get: function get() {\n\t      return this.timeMachine.timeIndex;\n\t    }\n\t  }, {\n\t    key: 'first',\n\t    get: function get() {\n\t      return this.at(0);\n\t    }\n\t  }, {\n\t    key: 'last',\n\t    get: function get() {\n\t      return this.at(this.model.length - 1);\n\t    }\n\t  }]);\n\t  return ImmutableModelManager;\n\t}(ModelManager);\n\n\tvar ActionManager = function () {\n\t  function ActionManager() {\n\t    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t    classCallCheck(this, ActionManager);\n\n\t    this.name = opts.name || 'default';\n\t    this.logging = opts.logging;\n\t    this.observer = {\n\t      undo: function undo(action) {},\n\t      redo: function redo(action) {}\n\t    };\n\n\t    this.actions = {\n\t      // stack of actions to undo\n\t      done: [],\n\t      // stack of actions undone to be redone(via. redo)\n\t      undone: []\n\t    };\n\t  }\n\n\t  createClass(ActionManager, [{\n\t    key: 'log',\n\t    value: function log(event) {\n\t      var _console;\n\n\t      if (!this.shouldLog) return;\n\n\t      for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n\t        args[_key - 1] = arguments[_key];\n\t      }\n\n\t      (_console = console).log.apply(_console, [this.clazzName + ' [' + this.name + '] :', event].concat(args));\n\t    }\n\t  }, {\n\t    key: 'clear',\n\t    value: function clear() {\n\t      this.actions.done = [];\n\t      this.actions.undone = [];\n\t    }\n\n\t    // perform undo/redo on model (container)\n\n\t  }, {\n\t    key: 'doAct',\n\t    value: function doAct(container, action) {\n\t      this.log('doAct', {\n\t        container: container,\n\t        action: action\n\t      });\n\t      var actFun = container[action].bind(container);\n\t      // this.log('doAct', actFun, container, action)\n\t      if (!actFun) {\n\t        throw new Error(container, 'missing', action, 'method');\n\t      }\n\t      actFun();\n\t    }\n\n\t    // if not a copy action, do the action on source container also\n\n\t  }, {\n\t    key: 'isSourceContainerAction',\n\t    value: function isSourceContainerAction(action) {\n\t      return action !== 'copy';\n\t    }\n\t  }, {\n\t    key: 'isTargetContainerAction',\n\t    value: function isTargetContainerAction(action) {\n\t      return true;\n\t    }\n\t  }, {\n\t    key: 'do',\n\t    value: function _do(_ref) {\n\t      var name = _ref.name,\n\t          container = _ref.container;\n\n\t      // this.log(name)\n\t      var cDo = container.do;\n\t      var cUndo = container.undo;\n\t      if (!cDo.length) {\n\t        // this.log('actions empty', cDo)\n\t        return;\n\t      }\n\t      var action = cDo.pop();\n\t      // TODO: use elements, indexes to create visual transition/animation effect\n\t      var models = action.models;\n\n\t      this.log('do', {\n\t        name: name,\n\t        action: action,\n\t        source: source,\n\t        target: target\n\t      });\n\n\t      var source = models.source,\n\t          target = models.target;\n\n\t      // perform one action on source and one on target\n\t      // this could be the cause of the double copy problem\n\t      // since a copy action only takes effect on the target container\n\n\t      if (this.isSourceContainerAction(action)) {\n\t        this.doAct(source, name);\n\t      }\n\t      if (this.isTargetContainerAction(action)) {\n\t        this.doAct(target, name);\n\t      }\n\n\t      this.emitAction(name, action);\n\n\t      cUndo.push(action);\n\t      // this.log('actions undo', cUndo)\n\t    }\n\t  }, {\n\t    key: 'emitAction',\n\t    value: function emitAction(name, action) {\n\t      this.log('emitAction', {\n\t        name: name,\n\t        action: action\n\t      });\n\t      var fun = this.observer[name];\n\t      if (typeof fun === 'function') fun(action);\n\t    }\n\t  }, {\n\t    key: 'onUndo',\n\t    value: function onUndo(fun) {\n\t      this.observer.undo = fun;\n\t    }\n\t  }, {\n\t    key: 'onRedo',\n\t    value: function onRedo(fun) {\n\t      this.observer.redo = fun;\n\t    }\n\t  }, {\n\t    key: 'undo',\n\t    value: function undo() {\n\t      this.log('UNDO');\n\n\t      this.do({\n\t        name: 'undo',\n\t        container: {\n\t          do: this.actions.done,\n\t          undo: this.actions.undone\n\t        }\n\t      });\n\t    }\n\t  }, {\n\t    key: 'redo',\n\t    value: function redo() {\n\t      this.log('REDO');\n\t      this.do({\n\t        name: 'redo',\n\t        container: {\n\t          do: this.actions.undone,\n\t          undo: this.actions.done\n\t        }\n\t      });\n\t    }\n\t  }, {\n\t    key: 'act',\n\t    value: function act() {\n\t      var action = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t      var name = action.name,\n\t          models = action.models,\n\t          indexes = action.indexes,\n\t          elements = action.elements;\n\n\t      this.log('act (store action on stack)', {\n\t        name: name,\n\t        models: models,\n\t        indexes: indexes,\n\t        elements: elements\n\t      });\n\t      this.actions.done.push(action);\n\t    }\n\t  }, {\n\t    key: 'clazzName',\n\t    get: function get() {\n\t      return this.constructor.name || 'ActionManager';\n\t    }\n\t  }, {\n\t    key: 'shouldLog',\n\t    get: function get() {\n\t      return this.logging;\n\t    }\n\t  }]);\n\t  return ActionManager;\n\t}();\n\n\tfunction plugin(Vue) {\n\t  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t  if (plugin.installed) {\n\t    console.warn('[vue-dragula] already installed.');\n\t  }\n\n\t  console.log('Add Dragula plugin:', options);\n\t  VueDragula(Vue, options);\n\t}\n\n\tplugin.version = '2.0.1';\n\n\tvar Vue2Dragula = plugin;\n\n\tif (typeof define === 'function' && define.amd) {\n\t  // eslint-disable-line\n\t  define([], function () {\n\t    plugin;\n\t  }); // eslint-disable-line\n\t} else if (window.Vue) {\n\t  window.Vue.use(plugin);\n\t}\n\n\texports.Vue2Dragula = Vue2Dragula;\n\texports.DragulaService = DragulaService;\n\texports.DragHandler = DragHandler;\n\texports.ModelManager = ModelManager;\n\texports.ImmutableModelManager = ImmutableModelManager;\n\texports.TimeMachine = TimeMachine;\n\texports.ActionManager = ActionManager;\n\n}));"],"sourceRoot":""}